<div class="dms-search">
	<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">车辆产品查询</div>
			<div class="modal-close">
				<a data-dismiss="modal" class="btn btn-lg">
				<i class="fa fa-remove"></i></a>
			</div>
		</div>
		<div class="modal-body">
				<div class="row">
				  <div data-tableVINSelect="true" data-tableProductSelect="true">
					 <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					      <div class="form-group">
								<label class="control-label col-xs-4">派工技师</label>
								<div class="col-xs-8">
									<div class="input-group">
										<input type="hidden" name='seNo' value='{[SE_NO]}' /> 
										<input id="employeeName" name="employeeName" onMouseMove="this.title=this.value" disabled
											class="form-control" type="text" data-fieldName="EMPLOYEE_NAME"/> 
										<span class="input-group-btn">
											<button class="btn default btn-sm" type="button"
												data-url="vehicle/upholsterWorker/selectTechnician.html"
												data-toggle="modal" data-width="modal-lg">
												<i class="fa fa-sitemap"></i>
											</button>
											<button class="btn default input-clear" type="button">
												<i class="fa fa-close"></i>
											</button>
										</span>
									</div>
								</div>
							</div>
					  </div>
					
				  <div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
						<div class="form-group">
							<div class="col-xs-8 ">
								<input id="employeeNo" name="employeeNo" data-fieldName="EMPLOYEE_NO" disabled
									class="form-control" type="text" />
							</div>
						</div>
				 </div>
				 
				 <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">派工工位</label>
							<div class="col-xs-8">
								<select
									class="bs-select form-control" id = "positionCode" name="positionCode"
									data-url="/stockManage/UpholsterWorker/LabourPostion"
									data-model="vehicle" data-fieldName="LABOUR_POSITION_CODE"  data-labelValue="LABOUR_POSITION_CODE" 
									data-lableDesc="LABOUR_POSITION_NAME" >
								</select>
							</div>
						</div>
				 </div>
				 
				 <div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4 ">工时系数</label>
							<div class="col-xs-8 ">
								<input  data-fieldName="LABOUR_FACTOR"  id= "factor" name="factor" disabled
									class="form-control" type="text" />
							</div>
						</div>
				 </div>
				 
				 <!--  -->
				 <!-- <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					      <div class="form-group">
								<label class="control-label col-xs-4">检验人</label>
								<div class="col-xs-8">
									<div class="input-group">
										<input type="hidden" name='seNo' value='{[SE_NO]}' /> 
										<input id="employeeName" name="employeeName" onMouseMove="this.title=this.value" disabled
											class="form-control" type="text" data-fieldName="EMPLOYEE_NAME"/> 
										<span class="input-group-btn">
											<button class="btn default btn-sm" type="button"
												data-url="vehicle/upholsterWorker/selectTechnician.html"
												data-toggle="modal" data-width="modal-lg">
												<i class="fa fa-sitemap"></i>
											</button>
											<button class="btn default input-clear" type="button">
												<i class="fa fa-close"></i>
											</button>
										</span>
									</div>
								</div>
							</div>
					  </div>
					
				  <div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
						<div class="form-group">
							<div class="col-xs-8 ">
								<input id="employeeNo" name="employeeNo" data-fieldName="EMPLOYEE_NO" disabled
									class="form-control" type="text" />
							</div>
						</div>
				 </div> -->
				 <!--  -->
				<!--   
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					      <div class="form-group">
								<label class="control-label col-xs-4">检验人</label>
								<div class="col-xs-8">
									<div class="input-group">
										<input type="hidden" name='seNo' value='{[SE_NO]}' /> 
										<input id="productCode" name="productCode" onMouseMove="this.title=this.value" disabled
											class="form-control" type="text" data-fieldName="PRODUCT_CODE"/> 
										<span class="input-group-btn">
											<button class="btn default btn-sm" type="button"
												data-url="vehicle/saleOdditionalOrder/searchProduct.html"
												data-toggle="modal" data-width="modal-lg">
												<i class="fa fa-sitemap"></i>
											</button>
											<button class="btn default input-clear" type="button">
												<i class="fa fa-close"></i>
											</button>
										</span>
									</div>
								</div>
							</div>
					  </div>
					
				  <div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
						<div class="form-group">
							<div class="col-xs-8 ">
								<input id="license" name="license" data-fieldName="LABOUR_POSITION_CODE" 
									class="form-control" type="text" />
							</div>
						</div>
				  </div> 
				  -->
				  
				  
				  
				</div>
			</div>
			<div class="row ">
				<div class="col-xs-12 ">
					<div class="query-btn">
						<a data-url="/stockManage/UpholsterWorker/addUpholsterWorker/{[SO_NO]}" data-model="vehicle" 
						data-method="POST" data-callBack="true" class="btn blue" data-onclickEvent="true"
						data-toggle="confirmation"><i class="fa fa-save"></i>保存</a>
						<a data-dismiss="modal" class="btn blue"><i
						class="fa fa-undo"></i>取消</a>
					</div>
				</div>
			</div>
	
			<div class="panel panel-default table-panel">
			<div class="panel-heading">
				<div class="pannel-name" >装潢项目</div>
			</div>
			<div class="panel-body">
				<table
					class="table table-striped table-bordered table-hover table-responsive"
					id="dms_table">
				</table>
			</div>
			
		</div>
		&nbsp;
		<div class="panel panel-default table-panel">
			<div class="panel-heading">
				<div class="pannel-name" >装潢配件</div>
			</div>
			<div class="panel-body">
				<table
					class="table table-striped table-bordered table-hover table-responsive"
					id="dms_table1">
				</table>
			</div>
			
		</div>
		&nbsp;
		</div>
<!-- 		<div class="modal-footer center-block">
			<a  class="btn blue" data-onclickEvent="true"><i class="fa fa-save"></i>确认</a> <a
				data-dismiss="modal" class="btn blue"><i
				class="fa fa-undo"></i>取消</a>
		</div> -->
	</form>
</div>
<script type="text/javascript">

	$(document).one("onload.dms",function(event,container){
	
		
		new Datatable().initPagination({
			src : "dms_table",
			url : dmsCommon.getDmsPath()["vehicle"] + "/stockManage/UpholsterWorker/SearchWorker1/{[SO_NO]}",
			rowID : "SO_NO",
			autoHeight : false,
			sortName : "SO_NO", 
			undefinedText : "",
			sortOrder : "asc",
			checkboxHeader:true, //全选框
			columns : [ 
				/* {radio:true,sortable : false}, */
				{field : "UPHOLSTER_CODE",title : "装潢项目代码"}, 
				{field : "UPHOLSTER_NAME",title : "装潢项目名称"}, 
				{field : "LABOUR_AMOUNT",title : "工时费"}, 
				{field : "ASSIGN_LABOUR_HOUR",title : "派工工时"}, 
				{field : "TECHNICIAN",title : "技师"},
				{field : "ASSIGN_TAG",title : "派工标志" ,inputRadioFormat : {type : "dict",codeType : "1278"}},
			 	{field : "REMARK",title : "备注"},
		        {field : "ITEM_ID",title : "id",visible : false}
			]
		});
		
		new Datatable().initPagination({
			src : "dms_table1",
			url : dmsCommon.getDmsPath()["vehicle"] + "/stockManage/UpholsterWorker/part/{[SO_NO]}",
			rowID : "SO_NO",
			autoHeight : false,
			sortName : "SO_NO", 
			undefinedText : "",
			sortOrder : "asc",
			checkboxHeader:true, //全选框
			columns : [ 
				//{radio:true,sortable : false},
				{field : "STORAGE_CODE",title : "仓库代码"}, 
				{field : "STORAGE_POSITION_CODE",title : "库位代码"},
				{field : "PART_NO",title : "配件代码"},
			 	{field : "PART_NAME",title : "车辆配置"},
				{field : "UNIT_CODE",title : "计量单位"},
				{field : "PART_COST_PRICE",title : "配件销售单价"},
				{field : "PART_SALES_AMOUNT",title : "配件销售金额"}
			]/*  ,onLoadSuccess : function() {
          	  var rownu = $("#dms_table1",container).dmsTable().getTableRows();
				  if(rownu<=0){
					$("#dms_table1",container).addClass("hidden");
				  }else{
					$("#panelSoServicesList",container).removeClass("hidden");
					}
			}  */
			
		});
		
		/*
		$("a[data-onclickEvent='true']",container).on("dms.click",function(event,response){
			var selectRow = $("#dms_table",container).dmsTable().getFirstSelection();
			$("div[data-tableProductSelect='true']",getElementContext()).initHtmlContent(selectRow);
			/* $("div[data-tableSelect2='true']",getElementContext()).initHtmlContent(selectRow); 
			
			$("a[data-dismiss='modal']",container).click();
		}); 
		*/
		
		//点击保存刷新装潢项目
		$("a[data-onclickEvent='true']",container).on("dms.click",function(event,response){
			var rownu = $("#dms_table",container).dmsTable().getTableRows();
			if(rownu <= 0 ) {
				 dmsCommon.tip({status:"warning",msg:"无装潢项目，不能保存！"});
			     returnResult.status=false;
			     return;
			}
			 returnResult.status=true;
		});
		
		//点击保存刷新装潢项目
		$("a[data-callBack='true']",container).on("callBack.dms",function(event,response){
			$("#dms_table",container).dmsTable().refreshTableWithForm();
		});
		
	});
</script>