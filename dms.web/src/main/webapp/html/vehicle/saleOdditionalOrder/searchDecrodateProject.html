<div class="dms-search">
<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">装潢项目选择</div>
			<div class="modal-close">
				<a data-dismiss="modal" class="btn btn-lg"> <i
					class="fa fa-remove"></i></a>
			</div>
		</div>
		<div class="modal-body">
			<div class="panel panel-default">
				<div class="panel-body">
					<div class="row">
					    <div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">项目车型组</label>
							<div class="col-xs-8">
								<select id="modelLabourCode" class="bs-select form-control" name="model_Labour_Code"
									data-url="/decrodateProject/duty/dicts" data-model="vehicle"
									data-labelValue="MODEL_LABOUR_CODE" data-lableDesc="MODEL_LABOUR_NAME" multiple
									data-live-search="true" data-size="4" data-existsDefault="false">
								</select>
							</div>
						</div>
					</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4 ">对应车型</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="" name="">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">是否下发</label>
							<div class="col-xs-8">
								<select id="downTag" name="downTag" class="bs-select form-control" data-dictCode="1278">
								</select>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 ">
						<div class="form-group">
							<label class="control-label col-xs-4 ">装潢项目名称</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="labourName" name="labourName">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4 ">装潢项目代码</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="labourCode" name="labourCode">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4 ">装潢项目拼音</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="spellCode" name="spellCode">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">主分类名称</label>
							<div class="col-xs-8">
								<select id="mainGroupCode" class="bs-select form-control" name="mainGroupCode"
									data-url="/decrodateProject/duty/main" data-model="vehicle"
									data-labelValue="MAIN_GROUP_CODE" data-lableDesc="MAIN_GROUP_NAME">
								</select>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">二级分类名称</label>
							<div class="col-xs-8">
								<select id="subGroupCode" parent="mainGroupCode" class="bs-select form-control"
									name="subGroupCode" data-url="/decrodateProject/{[mainGroupCode]}/sub" data-model="vehicle"
									data-labelValue="MAIN_GROUP_CODE" data-lableDesc="SUB_GROUP_NAME">
								</select>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4 ">行管项目代码</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="localLabourCode" name="localLabourCode">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4 ">行管项目名称</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="localLabourName" name="localLabourName">
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">工种</label>
							<div class="col-xs-8">
								<select id="workerTypeCode" class="bs-select form-control" name="workerTypeCode"
									data-url="/decrodateProject/duty/work" data-model="vehicle"
									data-labelValue="WORKER_TYPE_CODE" data-lableDesc="WORKER_TYPE_NAME">
								</select>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">标准工时为空</label>
							<div class="col-xs-8">
								<select id="nullLabour" name="nullLabour" class="bs-select form-control" data-dictCode="1278">
								</select>
							</div>
						</div>
					</div>

					</div>
					<div class="row ">
						<div class="col-xs-12 ">
							<div class="query-btn">
								<a href="javascript:;" class="btn blue"> <i
									class="fa fa-search"></i>查询
								</a> 
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="panel panel-default table-panel">
			<div class="panel-heading">
			<div class="pannel-name" >装潢项目</div>
		</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="decrodateProjectList">
					</table>
				</div>
			</div>
		</div>
		<div class="modal-footer center-block">
			<a class="btn blue" data-onclickEvent="true" data-beforeShowEvent="true"><i class="fa fa-save"></i>确定</a>
			<a data-dismiss="modal" class="btn blue"> <i class="fa fa-undo"></i>取消</a>
		</div>
</form>
</div>
<script type="text/javascript">
	$(document).one("onload.dms",function(event,container){

		//树节点选择
		$('.tree',container).on('changed.jstree', function (e, data) {
			var node = data.changed.selected;
			if(node!=""){
				$("#code",container).val(node);
				$("#decrodateProjectList",getElementContext()).dmsTable().refreshTableWithForm();
			} 
		});
		
	 	new Datatable().initPagination({
			src : "decrodateProjectList",
			rowID:"CREATED_AT",
			container:container,
		 	url : dmsCommon.getDmsPath()["vehicle"] + "/ordermanage/salesOdditionalOrder/decrodateProject", 
			sortName : "CREATED_AT", 
			sortOrder : "asc",
			autoHeight:false,
			isQueryFirst:false,
			columns : [ 
				 {radio:true,sortable : false},
				 {field : "MODEL_LABOUR_CODE",title : "维修车型分组代码"},
             	 {field : "UPHOLSTER_CODE",title : "装潢项目代码"},
		         {field : "UPHOLSTER_NAME",title : "装潢项目名称"},
		         {field : "REPAIR_TYPE_CODE",title : "装潢类型"},
		         {field : "LOCAL_LABOUR_CODE",title : "行管项目代码"},
		         {field : "LOCAL_LABOUR_NAME",title : "行管项目名称"},
		         {field : "STD_LABOUR_HOUR",title : "标准工时"},
		         {field : "ASSIGN_LABOUR_HOUR",title : "派工工时"},
		         {field : "WORKER_TYPE_CODE",title : "工种"},
		         {field : "OPERATION_CODE",title : "索赔项目代码"},
		         {field : "CLAIM_LABOUR",title : "索赔工时"},
		         {field : "SPELL_CODE",title : "拼音代码"},
		         {field : "REPAIR_GROUP_CODE",title : "装潢项目分组代码"},
		         {field : "OEM_LABOUR_HOUR",title : "OEM标准工时"},
		         {field : "DOWN_TAG",title : "是否下发" ,codeFormat : {type:"dict",codeType:"1278"}},
		         {field : "CREATED_AT",title : "创建日期",dateFormat : {format:"YYYY-MM-DD HH:mm:ss"}},
		         {field : "UPDATED_AT",title : "更新日期",dateFormat : {format:"YYYY-MM-DD HH:mm:ss"}},
		         {field : "IS_MEMBER",title : "是否会员专用",codeFormat : {type:"dict",codeType:"1278"}},
		         {field : "REPLACE_STATUS",title : "更新状态" ,codeFormat : {type:"dict",codeType:"1278"}}
			         ],
		});
		//触发点击事件
		$("a[data-onclickEvent='true']",container).on("dms.click",function(event,container){
			var selectRow = $("#decrodateProjectList",container).dmsTable().getFirstSelection();
			var rowTR = $("#soDecrodateList",getElementContext()).dmsTable().appendRow(selectRow);
			dmsRetail.saleDatabindChange(getElementContext());
		
			//关闭窗口
			$("a[data-dismiss='modal']",container).click();
		});
	});

</script>