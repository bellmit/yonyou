<div class="dms-search">
	<form class="form-horizontal" >
		<div class="panel panel-default">
			<div class="panel-body">
				<div class="row ">
					 
					 <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" data-tableSelect="true">
						<div class="form-group">
							<label class="control-label col-xs-4">经销商</label>
							<div class="col-xs-8">
								<div class="input-group">
									<input id="dealerCode" readonly name="dealerCode"
										class="form-control" type="text" data-fieldName="dealer_code" />
									<span class="input-group-btn">
										<button class="btn default btn-sm" type="button"
											data-url="manage/basedata/dealers/searchDealers.html"
											data-toggle="modal" data-width="modal-lg">
											<i class="fa fa-list-alt"></i>
										</button>
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
					
			       <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">销售区域:</label>
							<div class="col-xs-8">
								<select id="bigOrg"
									class="bs-select form-control" name="resourceScope"
									data-url="/basedata/orgManage/bigOrg"
									data-model="manage" data-labelValue="BIG_ORG"
									data-lableDesc="BIG_ORG_NAME" multiple data-live-search="fales" data-size="5" data-existsDefault = "false" >
								</select>
								
							</div>
						</div>
					</div>
					
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
							<div class="form-group">
								<label class="control-label col-xs-4">销售小区:</label>
								<div class="col-xs-8">
									<select id="smallOrg" parent="bigOrg"
										class="bs-select form-control" name="orgId"
										data-url="/basedata/orgManage/{[bigOrg]}/smallOrg"
										data-model="manage" data-labelValue="SMALL_ORG"
										data-lableDesc="SMALL_ORG_NAME" multiple data-live-search="fales" data-size="5" data-existsDefault = "false" >
									</select>
									
								</div>
							</div>
						</div>
					
					<!-- <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3  " data-tableSelect="true">
						<div class="form-group"> 
								<label class="control-label col-xs-4">经销商</label> 
 								<div class="col-xs-8">
									<div class="input-group">
									<input id="dealerCode" readonly
										name="dealerCode" class="form-control" type="text"
										/> <span
											class="input-group-btn" >
											<button class="btn default btn-sm" type="button"
												data-url="manage/distributorManage/searchDealers.html"
												data-toggle="modal" data-width="modal-lg">
												<i class="fa fa-list-alt"></i>
											</button>
											<button class="btn default input-clear" type="button">
												<i class="fa fa-close"></i>
											</button>
										</span>
									</div>
								</div>
							</div>
					</div>	 -->
					
					
					
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">大客户名称</label>
							<div class="col-xs-8">
							
								<input type="text" class="form-control" id="dealerShortname" name="dealerShortname">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">报备单号</label>
							<div class="col-xs-8">
								<input type="text" class="form-control" id="wsNo" name="wsNo">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-12 col-sm-4">上报日期</label>
							<div class="col-xs-6 col-sm-8">
								 <div class="input-group input-daterange" data-maxDays = "30" data-opens="right">
		                             <input type="text" class="form-control" readonly  name="reportedStartDate">
		                             <span class="input-group-addon">至</span>
		                             <input type="text" class="form-control" readonly  name="reportEndDate">
		                             <span class="input-group-btn">
                                         <button class="btn default input-clear" type="button">
                                            <i class="fa fa-close"></i>
                                        </button>
                                      </span> 
		                        </div>
							</div>
						</div>
					</div>
					
					
							
				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn blue" data-onclickEvent="true"> <i
								class="fa fa-search" ></i> 查询
							</a> 
							<a href="javascript:;" class="btn blue"><i
								class="fa fa-undo"></i> 重置
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</form>
	<div class="panel panel-default table-panel">
			<div class="panel-heading">
				
				<div class="pannel-button">
						<div class="btn-group btn-group-sm">
					
							<a  class="btn btn-outline" data-onclickEvent="true" id="dontApproval">
								<i class="fa fa-search"></i> 报备未审批</a> 
							<a href="javascript:;" class="btn btn-outline" data-onclickEvent="true" id="passApproval">
								<i class="fa fa-search"></i> 报备审批通过 
							</a>
						 <a href="javascript:;" class="btn btn-outline" data-onclickEvent="true" id="rejectApproval">
								<i class="fa fa-search"></i> 报备审批驳回</a> 
							<a href="javascript:;" class="btn btn-outline" data-onclickEvent="true" id="refuseApproval">
								<i class="fa fa-search"></i> 报备审批拒绝
							</a>
							
							<a href="javascript:;" data-url="/bigCustomerAaManage/dlrFilingApprovalInfoDownLoadDetail" data-model="vehicle" data-method="downLoad" data-toggle="confirmation"
								class="btn btn-outline " ><i class="fa fa-download"></i>明细下载</a>
						</div>						 
				</div>
		</div>
		
	</div>
	<div class="panel panel-default table-panel " id = "dontApprovalId">
		<div class="panel-heading">
			<div class="pannel-name">报备未审批列表</div>
			<a href="javascript:;"    data-url="/bigCustomerAaManage/dlrFilingApprovalInfoDownLoad"   data-model="vehicle" data-method="downLoad" data-toggle="confirmation" class="btn btn-outline"> <i
								class="fa fa-download" ></i> 下载
			</a> 
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="dontApproval_table"></table>
		</div>
	</div>
	<div class="panel panel-default table-panel hidden" id = "passApprovalId">
		<div class="panel-heading">
			<div class="pannel-name">报备审批通过列表</div>
			<a href="javascript:;"    data-url="/bigCustomerAaManage/dlrFilingApprovalInfoDownLoad1"   data-model="vehicle" data-method="downLoad" data-toggle="confirmation" class="btn btn-outline"> <i
								class="fa fa-download" ></i> 下载
			</a> 
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="passApproval_table"></table>
		</div>
	</div>
	<div class="panel panel-default table-panel hidden" id = "rejectApprovalId">
		<div class="panel-heading">
			<div class="pannel-name">报备审批驳回列表</div>
			<a href="javascript:;"   data-url="/bigCustomerAaManage/dlrFilingApprovalInfoDownLoad2"   data-model="vehicle" data-method="downLoad" data-toggle="confirmation" class="btn btn-outline"> <i
								class="fa fa-download" ></i> 下载
			</a> 
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="rejectApproval_table"></table>
		</div>
	</div>
	<div class="panel panel-default table-panel hidden" id = "refuseApprovalId">
		<div class="panel-heading">
			<div class="pannel-name">报备审批拒绝列表</div>
			<a href="javascript:;"   data-url="/bigCustomerAaManage/dlrFilingApprovalInfoDownLoad3"  data-model="vehicle" data-method="downLoad" data-toggle="confirmation" class="btn btn-outline"> <i
								class="fa fa-download" ></i> 下载
			</a> 
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="refuseApproval_table"></table>
		</div>
	</div>
</div>
<script type="text/javascript">
 $(document).one("onload.dms",function(event,container){
	 //报备未审批
	 new Datatable().initPagination({
			src : "dontApproval_table",
			container:container,
			   url : dmsCommon.getDmsPath()["vehicle"] + "/bigCustomerAaManage/dontApprovalQuery",
			   rowID : "WS_NO",
			   pageSize:5,
			   autoHeight:false,
			   columns : [ 
				   {field :"WS_NO",title : "操作",operateFormat : [
                       { type:"edit",title : "审批",url:"vehicle/bigCustomerManage/bigcustomerfiling.html",openType:"jump",doubleClick:false}
                           ]
                     }, 
				            {field : "BIG_ORG_NAME",title : "大区"},
				            {field : "ORG_NAME",title : "小区"},
				            {field : "DEALER_CODE",title : "经销商代码"},
				            {field : "DEALER_NAME",title : "经销商名称"},
				            {field : "WS_NO",title : "报备单号"},
				            {field : "COMPANY_NAME",title : "公司名称"},
				            {field : "PS_TYPE",title : "政策类别",codeFormat : {type:"oemDict",codeType:"1597"}},
				            {field : "EMPLOYEE_TYPE",title : "客户类型",codeFormat : {type:"oemDict",codeType:"1099"}},
				            {field : "CUSTOMER_SUB_TYPE",title : "客户细分类别" ,codeFormat : {type:"oemDict",codeType:"1097"}},
				            {field : "UNSUB_WEEK_COUNT",title : "连续未提交周报数"},
				            {field : "REPORT_DATE",title : "上报日期"},
				            {field : "PS_SOURCE_APPLY_NUM_COUNT",title : "报备数量"},
				            {field : "ESTIMATE_APPLY_TIME",title : "预计申请时间"}
				]
			});
	 //报备审批通过
	 new Datatable().initPagination({
			src : "passApproval_table",
			container:container,
			   url : dmsCommon.getDmsPath()["vehicle"] + "/bigCustomerAaManage/passApprovalQuery",
			   rowID : "WS_NO",
			   pageSize:5,
			   autoHeight:false,
			   isQueryFirst:false,
			   columns : [ 
				   {field :"DEALER_ID",title : "操作",operateFormat : [
				     	{type:"edit",title : "明细",url:"vehicle/bigCustomerManage/bigcustomerfiling2.html",openType:"jump",doubleClick:false}
				       ]
				    } ,
				            {field : "BIG_ORG_NAME",title : "大区"},
				            {field : "ORG_NAME",title : "小区"},
				            {field : "DEALER_CODE",title : "经销商代码"},
				            {field : "DEALER_NAME",title : "经销商名称"},
				            {field : "WS_NO",title : "报备单号"},
				            {field : "COMPANY_NAME",title : "公司名称"},
				            {field : "PS_TYPE",title : "政策类别",codeFormat : {type:"oemDict",codeType:"1597"}},
				            {field : "EMPLOYEE_TYPE",title : "客户类型" ,codeFormat : {type:"oemDict",codeType:"1099"}},
				            {field : "CUSTOMER_SUB_TYPE",title : "客户细分类别" ,codeFormat : {type:"oemDict",codeType:"1097"}},
				            {field : "REPORT_DATE",title : "上报日期"},
				            {field : "PS_SOURCE_APPLY_NUM_COUNT",title : "报备数量"},
				            {field : "ESTIMATE_APPLY_TIME",title : "预计申请时间"},
				            {field : "SEND_EMAIL",title : "已发送邮件", codeFormat : {type:"oemDict",codeType:"1004"}},
				            {field : "REPORT_APPROVAL_DATE",title : "审核日期"},
				            {field : "REPORT_APPROVAL_STATUS",title : "审核结果", codeFormat : {type:"oemDict",codeType:"1598"}}
				            
				]
				
			});
		//报备审批驳回
	 new Datatable().initPagination({
			src : "rejectApproval_table",
			container:container,
			   url : dmsCommon.getDmsPath()["vehicle"] + "/bigCustomerAaManage/rejectApprovalQuery",
			   rowID : "WS_NO",
			   pageSize:5,
			   autoHeight:false,
			   isQueryFirst:false,
			   columns : [ 
				   
		            {field :"DEALER_ID",title : "操作",operateFormat : [
				                                                      {type:"edit",title : "明细",url:"vehicle/bigCustomerManage/bigcustomerfiling2.html",openType:"jump",doubleClick:false}
				                                                      ]
				    } ,
				            {field : "BIG_ORG_NAME",title : "大区"},
				            {field : "ORG_NAME",title : "小区"},
				            {field : "DEALER_CODE",title : "经销商代码"},
				            {field : "DEALER_NAME",title : "经销商名称"},
				            {field : "WS_NO",title : "报备单号"},
				            {field : "COMPANY_NAME",title : "公司名称"},
				            {field : "PS_TYPE",title : "政策类别",codeFormat : {type:"oemDict",codeType:"1597"}},
				            {field : "EMPLOYEE_TYPE",title : "客户类型",codeFormat : {type:"oemDict",codeType:"1099"}},
				            {field : "CUSTOMER_SUB_TYPE",title : "客户细分类别",codeFormat : {type:"oemDict",codeType:"1097"}},
				            {field : "REPORT_DATE",title : "上报日期"},
				            {field : "PS_SOURCE_APPLY_NUM_COUNT",title : "报备数量"},
				            {field : "ESTIMATE_APPLY_TIME",title : "预计申请时间"}
				]
			
			});
		//报备审批拒绝
	 	new Datatable().initPagination({
			src : "refuseApproval_table",
			container:container,
			   url : dmsCommon.getDmsPath()["vehicle"] + "/bigCustomerAaManage/refuseApprovalQuery",
			   rowID : "",
			   pageSize:5,
			   autoHeight:false,
			   isQueryFirst:false,
				columns : [ 
					      
							{field :"DEALER_ID",title : "操作",operateFormat : [
		                        {type:"edit",title : "明细",url:"vehicle/bigCustomerManage/bigcustomerfiling2.html",openType:"jump",doubleClick:false}
		                     ]},
				            {field : "BIG_ORG_NAME",title : "大区"},
				            {field : "ORG_NAME",title : "小区"},
				            {field : "DEALER_CODE",title : "经销商代码"},
				            {field : "DEALER_NAME",title : "经销商名称"},
				            {field : "WS_NO",title : "报备单号"},
				            {field : "COMPANY_NAME",title : "公司名称"},
				            {field : "PS_TYPE",title : "政策类别",codeFormat : {type:"oemDict",codeType:"1597"}},
				            {field : "EMPLOYEE_TYPE",title : "客户类型",codeFormat : {type:"oemDict",codeType:"1099"}},
				            {field : "CUSTOMER_SUB_TYPE",title : "客户细分类别",codeFormat : {type:"oemDict",codeType:"1097"}},
				            {field : "REPORT_DATE",title : "上报日期"},
				            {field : "PS_SOURCE_APPLY_NUM_COUNT",title : "报备数量"},
				            {field : "ESTIMATE_APPLY_TIME",title : "预计申请时间"},
				            {field : "REPORT_APPROVAL_DATE",title : "审核日期"},
				            {field : "REPORT_APPROVAL_STATUS",title : "审核结果", codeFormat : {type:"oemDict",codeType:"1598"}}
				            ]
			             });
	 
	 	//报备未审批
		$("#dontApproval[data-onclickEvent='true']",container).on("dms.click",function(event){
			$("#dontApprovalId",container).removeClass("hidden");
			$("#passApprovalId",container).addClass("hidden");
			$("#rejectApprovalId",container).addClass("hidden");
			$("#refuseApprovalId",container).addClass("hidden");
			$("#dontApproval_table",container).dmsTable().refreshTableWithForm();
			
		});
		
		//报备审批通过 
		$("#passApproval[data-onclickEvent='true']",container).on("dms.click",function(event){
			$("#passApprovalId",container).removeClass("hidden");
			$("#dontApprovalId",container).addClass("hidden");
			$("#rejectApprovalId",container).addClass("hidden");
			$("#refuseApprovalId",container).addClass("hidden");
			$("#passApproval_table",container).dmsTable().refreshTableWithForm();
		});
		//报备审批驳回
		$("#rejectApproval[data-onclickEvent='true']",container).on("dms.click",function(event){
			$("#rejectApprovalId",container).removeClass("hidden");
			$("#dontApprovalId",container).addClass("hidden");
			$("#passApprovalId",container).addClass("hidden");
			$("#refuseApprovalId",container).addClass("hidden");
			$("#rejectApproval_table",container).dmsTable().refreshTableWithForm();
			
		});
		
		//报备审批拒绝
		$("#refuseApproval[data-onclickEvent='true']",container).on("dms.click",function(event){
			$("#refuseApprovalId",container).removeClass("hidden");
			$("#dontApprovalId",container).addClass("hidden");
			$("#passApprovalId",container).addClass("hidden");
			$("#rejectApprovalId",container).addClass("hidden");
			$("#refuseApproval_table",container).dmsTable().refreshTableWithForm();
		});
		
	
		
});
    
</script>
