<div class="dms-edit ajaxrest" data-url="/repair/{[ID]}" data-model="vehicle" data-pageInitCallBack="true" >
	<form class="form-horizontal" >
	<div class="modal-header">
			<div class="modal-title">维修方案明细</div>
			<div class="modal-close">
				<a data-goback="page" href="vehicle/threepack/repairAudit/searchRepairAudit.html" class="btn btn-lg ajaxify"> <i
					class="fa fa-remove"></i></a>
			</div>
		</div>
		<div class="model-body" >
		<div class="panel panel-default">
			<div class="panel-body">
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">经销商代码:</label>
								<div class="col-xs-8">
									<input id="dealerCode" name="dealerCode" data-fieldName="DEALER_CODE" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">经销商名称:</label>
								<div class="col-xs-8">
									<input id="dealerName" name="dealerName" data-fieldName="DEALER_NAME" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">开单人：</label>
								<div class="col-xs-8">
									<input id="ReceiptRerson" name="ReceiptRerson" data-fieldName="RECEIPT_RERSON" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
			</div>
			
		</div>
	</div>
	</form>
</div>

<div class="dms-edit ajaxrest" data-url="/repair/infotoo/{[ID]}" data-model="vehicle" > 
<!--  -->
	<form class="form-horizontal" >
	<div class="modal-header">
			<div class="modal-title">客户信息信息</div>
		</div>
	<div class="model-body" >
		<div class="panel panel-default">
			<div class="panel-body">
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">工单号码:</label>
								<div class="col-xs-8">
									<input id="roNo" name="roNo" data-fieldName="RO_NO" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">VIN:</label>
								<div class="col-xs-8">
									<input id="vin" name="vin" data-fieldName="VIN" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">车牌号：</label>
								<div class="col-xs-8">
									<input id="plateNo" name="plateNo" data-fieldName="PLATE_NO" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">车主名称：</label>
								<div class="col-xs-8 ">
									<input id="ownerName" name="ownerName" data-fieldName="OWNER_NAME" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">购车日期:</label>
								<div class="col-xs-8 date">
									<input id="purchaseDate" name="purchaseDate" data-fieldName="PURCHASE_DATE" readonly="readonly" class="form-control required systemCode" maxlength="30" type="text" />
								</div>
							</div>
						</div>
					
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 "> 
							<div class="form-group">
								<label class="control-label col-xs-4">车型:</label>
								<div class="col-xs-8">
									<input id="model" readonly
										name="model" class="form-control" type="text"
										data-fieldName="MODEL"/> 
									</div>	
							</div>
						</div> 
						<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">发动机号：</label>
								<div class="col-xs-8">
									<input id="engineNo" name="engineNo" data-fieldName="ENGINE_NO" readonly="readonly" class="form-control" maxlength="30" type="text" />
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">行驶里程：</label>
								<div class="col-xs-8">
									<input id="mileage" name="mileage" data-fieldName="MILEAGE" readonly="readonly" class="form-control "  type="text" />
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4 ">
							<div class="form-group">
								<label class="control-label col-xs-4">进站日期：</label>
								<div class="col-xs-8">
									<input id="arriveDate" name="arriveDate" data-fieldName="ARRIVE_DATE" readonly="readonly" class="form-control "  type="text" />
								</div>
							</div>
						</div>
						
				
			</div>
		</div>
	</div>
	</form>
	
	</div>
	<div class="panel panel-default table-panel">
		<div class="panel-heading">
			<div class="pannel-name">工时信息</div>
			<div class="pannel-tools">
				<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
			</div>
		</div>
		<div class="panel-body">
			<table class="table table-striped table-bordered table-hover table-responsive"
				id="dmsList"></table>
		</div>
	</div>
	<div class="panel panel-default table-panel">
		<div class="panel-heading">
			<div class="pannel-name">配件信息</div>
			<div class="pannel-tools">
				<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
			</div>
		</div>
		<div class="panel-body">
			<table class="table table-striped table-bordered table-hover table-responsive"
				id="dealerList"></table>
		</div>
	</div>
	<div class="panel panel-default table-panel">
		<div class="panel-heading">
			<div class="pannel-name">维修方案审核状态</div>
			<div class="pannel-tools">
				<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
			</div>
		</div>
		<div class="panel-body">
			<table class="table table-striped table-bordered table-hover table-responsive"
				id="tableList"></table>
		</div>
	</div>
	<div class="model-footer">
		<div style="text-align:center">
			<a data-goback="page" href="vehicle/threepack/repairAudit/searchRepairAudit.html"
			class="btn blue ajaxify"><i class="fa fa-reply"></i>返回</a>			
		</div>						
	</div>

<script type="text/javascript">
$(document).one("onload.dms",function(event,container){
		

	
	//工时信息
	new Datatable().initPagination({
		src : "dmsList",
		container:container,
		url : dmsCommon.getDmsPath()["vehicle"] + "/repair/labourList/{[ID]}",
		//  
		rowID : "ID",
		sortName : "ID",
		sortOrder : "asc",
		autoHeight:false,
		pageSize:5,
		columns : [ 
		    {field : "LABOUR_CODE",title : "工时代码"}, 
			{field : "LABOUR_NAME",title : "工时名称"}, 
			{field : "LABOUR_NUM",title : "维修工时"}, 
			{field : "LABOUR_TYPE",title : "维修类型"}, 
			{field : "REMARK",title : "备注"}, 
		]

	});
	
	//配件信息
	new Datatable().initPagination({
		src : "dealerList",
		container:container,
		url : dmsCommon.getDmsPath()["vehicle"] + "/repair/list/{[ID]}",
		// 
		rowID : "ID",
		sortName : "ID",
		sortOrder : "asc",
		autoHeight:false,
		pageSize:5,
		columns : [ 
					{title: "配件编号", field: 'PART_CODE'},
					{title: "配件名称", field: 'PART_NAME'},
					{title: "数量", field: 'PART_NUM'},
					{title: "累计更换次数（含本次）", field: 'REPLACE_TIMES'},
					{title: "预警项目", field: 'WARNITEM_NO'},
					{title: "预警项目次数（含本次）", field: 'WARNITEM_TIMES'},
					{title: "备注", field: 'REMARK'}
		]

	});
	
	
	//维修方案审核状态
	new Datatable().initPagination({
		src : "tableList",
		container:container,
		url : dmsCommon.getDmsPath()["vehicle"] + "/repair/info/{[ID]}",
		// 
		rowID : "ID",
		sortName : "ID",
		sortOrder : "asc",
		autoHeight:false,
		pageSize:5,
		columns : [ 
			{field : "SUBMIT_DATE",title : "提交日期"}, 
		    {field : "DEALER_OPINOIN",title : "方案说明"}, 
			{field : "AUDIT_DATE",title : "审核时间" },
			{field : "AUDIT_STATUS",title : "审核结果", codeFormat : {type:"oemDict",codeType:"4043"}}, 
			{field : "AUDIT_PERSON",title : "审核人"},
			{field : "AUDIT_REMARK",title : "审核结果描述"} 
		]

	});
	
	//刷新表格
	$("#dms_table",getElementContext()).dmsTable().refreshTableWithForm();
	
})
    
</script>
