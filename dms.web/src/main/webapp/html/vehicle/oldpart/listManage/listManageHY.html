<div class="dms-edit ajaxrest" data-url="/listManage/{[OLDPART_ID]}"
	data-model="vehicle" data-pageInitCallBack="true">
	<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">维修方案明细</div>
		</div>
		<div class="model-body">
			<div class="panel panel-default">
				<div class="panel-body">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">经销商代码:</label>
							<div class="col-xs-8">
								<input id="dealerCode" name="dealerCode"
									data-fieldName="DEALER_CODE" readonly="readonly"
									class="form-control required " maxlength="30" type="text" />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">经销商名称:</label>
							<div class="col-xs-8">
								<input id="dealerName" name="dealerName"
									data-fieldName="DEALER_NAME" readonly="readonly"
									class="form-control required " maxlength="30" type="text" />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">承运商：</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									class="form-control  " maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">货运单号：</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
								 class="form-control  " maxlength="30"
									type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">回运清单号：</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									data-fieldName="RECEIPT_RERSON" readonly="readonly"
									class="form-control required " maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">建单日期：</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									data-fieldName="RECEIPT_RERSON" readonly="readonly"
									class="form-control required " maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">返还地</label>
							<div class="col-xs-8">
								<select class="bs-select form-control" id="returnaddrCode"
									name="returnaddrCode" data-url="/count/returnaddr"
									data-model="vehicle" data-lableDesc="RETURNADDR_NAME"
									data-labelValue="RETURNADDR_CODE">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">运输费用：</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									class="form-control  " maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">旧件总数</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									readonly="readonly" class="form-control required "
									maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">接收总数</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									readonly="readonly" class="form-control required "
									maxlength="30" type="text" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">拒绝总数</label>
							<div class="col-xs-8">
								<input id="ReceiptRerson" name="ReceiptRerson"
									readonly="readonly" class="form-control required "
									maxlength="30" type="text" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>


<div class="panel panel-default table-panel">
	<div class="panel-heading">
		<div class="pannel-name">旧件信息</div>
		<div class="pannel-button">
			<div class="btn-group btn-group-sm">
				<a 
					data-url="vehicle/oldpart/listManage/addListManage.html"
					data-beforeShowEvent="true" class="btn btn-outline"
					data-toggle="modal" data-width="modal-lg"> <i
					class="fa fa-plus-square"></i> 新增旧件
				</a> 
			</div>
		</div>
	</div>
	<div class="panel-body">
		<table
			class="table table-striped table-bordered table-hover table-responsive"
			id="dmsList"></table>
	</div>
</div>
<div class="model-footer">
	<div style="text-align: center">
		</a> <a data-dismiss="modal" class="btn blue"><i
				class="fa fa-undo"></i>返回</a>
	</div>
</div>

<script type="text/javascript">
	$(document).one(
			"onload.dms",
			function(event, container) {

				//旧件信息
				new Datatable().initPagination({
					src : "dmsList",
					container : container,
					rowID : "OLDPART_ID",
					sortName : "",
					sortOrder : "",
					autoHeight:false,
					pageSize:5,
					columns : [ {
						checkbox : true,
						sortable : false
					}, {
						field : "DEALER_CODE",
						title : "经销商代码",
						inputHiddenFormat : {}
					}, {
						field : "DEALER_NAME",
						title : "经销商名称",
						inputHiddenFormat : {}
					}, {
						field : "BALANCE_NO",
						title : "结算单号",
						inputHiddenFormat : {}
					}, {
						field : "REPAIR_NO",
						title : "工单号",
						inputHiddenFormat : {}
					}, {
						field : "CLAIM_NUMBER",
						title : "索赔单号",
						inputHiddenFormat : {}
					}, {
						field : "VIN",
						title : "VIN码",
						inputHiddenFormat : {}
					}, {
						field : "OLDPART_NO",
						title : "旧件代码",
						inputHiddenFormat : {}
					}, {
						field : "OLDPART_NAME",
						title : "旧件名称",
						inputHiddenFormat : {}
					}, {
						field : "OLDPART_STATUS",
						title : "旧件状态",
						inputHiddenFormat : {},
						codeFormat : {
							type : "oemDict",
							codeType : "9116"
						}
					}, {
						field : "RECEIVE_REMARK",
						title : "拒绝原因",
						inputHiddenFormat : {}
					}, {
						field : "PART_FEE",
						title : "含税索赔价",
						inputHiddenFormat : {}
					}, {
						field : "BRAND_CODE",
						title : "品牌",
						inputHiddenFormat : {}
					}, {
						field : "SERIES_NAME",
						title : "车系",
						inputHiddenFormat : {}
					}, {
						field : "MODEL_NAME",
						title : "车型",
						inputHiddenFormat : {}
					}, {
						field : "OLDPART_TYPE",
						title : "旧件类型",
						inputHiddenFormat : {},
						codeFormat : {
							type : "oemDict",
							codeType : "9111"
						}
					}, {
						field : "RETURN_BILL_TYPE",
						title : "回运类型",
						inputHiddenFormat : {},
						codeFormat : {
							type : "oemDict",
							codeType : "9113"
						}
					}, {
						field : "CLAIM_APPLY_DATE",
						title : "索赔申请日期",
						inputHiddenFormat : {}
					}, {
						field : "CLAIM_AUDIT_DATE",
						title : "索赔申请通过日期",
						inputHiddenFormat : {}
					}, {
						field : "MSV",
						title : "MSV码",
						inputHiddenFormat : {}
					}, {
						field : "PURCHASE_DATE",
						title : "购车日期",
						inputHiddenFormat : {}
					}, {
						field : "REPAIR_DATE",
						title : "维修日期",
						inputHiddenFormat : {}
					}, {
						field : "REPAIR_TYPE",
						title : "维修类型",
						inputHiddenFormat : {},
						codeFormat : {
							type : "oemDict",
							codeType : "4100"
						}
					}, {
						field : "OUT_MILEAGE",
						title : "行驶里程",
						inputHiddenFormat : {}
					}, {
						field : "REPAIR_REMARK",
						title : "维修备注",
						inputHiddenFormat : {}
					} ],
					onLoadSuccess : function(){
					}
				});

				var item = $("#dms_table",getElementContext()).dmsTable().getSelections(); 
				$.each(item,function(name,value){
					$("#dmsList",container).dmsTable().appendRow(value,false); //新增一行
				})
				//刷新表格
				/* $("#dmsList", getElementContext()).dmsTable()
						.refreshTableWithForm(); */
				//新增页面的回调函数
				$("a[data-callBack='true']",container).on("callBack.dms",function(event,response){
					//关闭窗口
					$("a[data-dismiss='modal']",container).click();
				
				});
			})
</script>
