<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="modal-title">旧件清单查询</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">索赔单号</label>
							<div class="col-xs-8">
								<input type="text" id="repairNo" name="repairNo"
								class="form-control" 	data-fieldName="REPAIR_NO">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">旧件代码</label>
							<div class="col-xs-8">
								<input type="text" id="oldpPartNo" name="oldpPartNo"
								class="form-control" 	data-fieldName="OLDPART_NO">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" data-tableSelect="true">
						<div class="form-group">
							<label class="control-label col-xs-4">经销商代码</label>
							<div class="col-xs-8">
								<div class="input-group">
									<input id="dealerCode" readonly name="dealerCode"
										class="form-control" type="text" data-fieldName="DEALER_CODE" />
									<span class="input-group-btn">
										<button class="btn default btn-sm" type="button"
											data-url="manage/basedata/dealers/searchDealer.html"
											data-toggle="modal" data-width="modal-lg">
											<i class="fa fa-list-alt"></i>
										</button>
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
			
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">是否自销毁件</label>
							<div class="col-xs-8">
								<select id="ifType" name="ifType" class="bs-select form-control"
									data-type="oemDict" data-existsDefault="false"
									data-dictCode="1004" data-value="10041002">
								</select>
							</div>
						</div>
					</div>
						</div>

				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">是否返回</label>
							<div class="col-xs-8">
								<select id="opType" name="opType" class="bs-select form-control"
									data-type="oemDict" data-dictCode="9111">
								</select>
							</div>
						</div>
					</div>
			
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">物料组</label>
							<div class="col-xs-8">
								<select id="groupType" name="groupType" class="bs-select form-control"
									data-type="oemDict" data-existsDefault="false"
									data-dictCode="9008" data-value="90081001">
								</select>
							</div>
						</div>
					</div>
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4">品牌</label>
								<div class="col-xs-8">
									<select id="brandId"
										class="bs-select form-control" name="brandCode"
										data-url="/basedata/material/brand/2"
										data-model="manage" data-labelValue="BRAND_ID"
										data-lableDesc="BRAND_NAME">
									</select>
									
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4">车系</label>
								<div class="col-xs-8">
									<select id="seriesId" parent="brandId"
										class="bs-select form-control" name="seriesName"
										data-url="/basedata/material/series/2/{[brandId]}"
										data-model="manage" data-labelValue="SERIES_ID"
										data-lableDesc="SERIES_NAME">
									</select>
									
								</div>
							</div>
						</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">VIN</label>
							<div class="col-xs-8">
								<input type="text" id="vin" name="vin" class="form-control"  data-fieldName="VIN">
							</div>
						</div>
					</div>
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">旧件状态</label>
							<div class="col-xs-8">
								<select id="status" name="status" class="bs-select form-control"
									data-type="oemDict" data-existsDefault="false"
									data-dictCode="9112" data-value="91121001">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 ">
						<div class="form-group">
							<label class="control-label col-xs-4 col-sm-2">结算时间</label>
							<div class="col-xs-8 col-sm-10">
								<div class="input-group input-daterange" data-maxDays="30"
									data-opens="right">
									<input type="text" class="form-control" readonly
										name="beginDate"> <span class="input-group-addon">-</span>
									<input type="text" class="form-control" readonly name="endDate">
									<span class="input-group-btn">
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>

				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn blue"> <i
								class="fa fa-search"></i> 查询
							</a> <a href="javascript:;" class="btn blue"><i
								class="fa fa-undo"></i> 重置</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	<div class="panel panel-default table-panel">
		<div class="panel-heading">
			<div class="pannel-name">旧件清单查询</div>
			<div class="pannel-button">
				<div class="btn-group btn-group-sm">
						  <a href="javascript:;" data-url="/listManage/export/excel" data-model="vehicle" data-method="downLoad"
								class="btn btn-outline ajaxrest" data-validate = "false"><i class="fa fa-download"></i> 下载</a>
							<a 
								data-url="vehicle/oldpart/listManage/listManageHY.html"
								data-beforeShowEvent="true" class="btn btn-outline"
								data-toggle="modal" data-width="modal-lg"> <i
								class="fa fa-plus-square"></i> 生成回运单
							</a> 
				</div>
			</div>
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="dms_table"></table>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).one("onload.dms", function(event, container) {
		new Datatable().initPagination({
			src : "dms_table",
			container : container,
			url : dmsCommon.getDmsPath()["vehicle"] + "/listManage",
			rowID : "OLDPART_ID",
			sortName : "",
			sortOrder : "",
			columns : [  {checkbox:true,sortable : false}, {
				field : "DEALER_CODE",
				title : "经销商代码"
			}, {
				field : "DEALER_NAME",
				title : "经销商名称"
			}, {
				field : "BALANCE_NO",
				title : "结算单号",
			}, {
				field : "REPAIR_NO",
				title : "工单号"
			}, {
				field : "CLAIM_NUMBER",
				title : "索赔单号"
			}, {
				field : "VIN",
				title : "VIN码"
			}, {
				field : "OLDPART_NO",
				title : "旧件代码"
			}, {
				field : "OLDPART_NAME",
				title : "旧件名称"
			}, {
				field : "OLDPART_STATUS",
				title : "旧件状态",
				codeFormat : {
					type : "oemDict",
					codeType : "9116"
				}
			}, {
				field : "RECEIVE_REMARK",
				title : "拒绝原因"
			}, {
				field : "PART_FEE",
				title : "含税索赔价",
			}, {
				field : "BRAND_CODE",
				title : "品牌"
			}, {
				field : "SERIES_NAME",
				title : "车系"
			}, {
				field : "MODEL_NAME",
				title : "车型"
			}, {
				field : "OLDPART_TYPE",
				title : "旧件类型",
				codeFormat : {
					type : "oemDict",
					codeType : "9111"
				}
			}, {
				field : "RETURN_BILL_TYPE",
				title : "回运类型",
				codeFormat : {
					type : "oemDict",
					codeType : "9113"
				}
			}, {
				field : "CLAIM_APPLY_DATE",
				title : "索赔申请日期"
			}, {
				field : "CLAIM_AUDIT_DATE",
				title : "索赔申请通过日期",
			}, {
				field : "MSV",
				title : "MSV码"
			}, {
				field : "PURCHASE_DATE",
				title : "购车日期"
			}, {
				field : "REPAIR_DATE",
				title : "维修日期"
			}, {
				field : "REPAIR_TYPE",
				title : "维修类型",
				codeFormat : {
					type : "oemDict",
					codeType : "4100"
				}
			}, {
				field : "OUT_MILEAGE",
				title : "行驶里程"
			}, {
				field : "REPAIR_REMARK",
				title : "维修备注"
			} ]
		});
		
		$("a[data-beforeShowEvent='true']",container).on("beforeShow.dms",function(event,returnResult){
			
			returnResult.status = true;
		});
	});
</script>
