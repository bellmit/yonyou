<div class="panel panel-default table-panel">
	<div class="panel-heading">
		<div class="pannel-name">旧件扫描清点</div>
		<div class="pannel-tools">
			<a href="javascript:;" class="expand"> <i
				class="fa fa-chevron-down"></i></a>
		</div>
	</div>
	<div class="panel-body">
		<table
			class="table table-striped table-bordered table-hover table-responsive"
			id="dms_table"></table>
	</div>
</div>
<div class="dms-edit ajaxrest" data-url="/approve/{[OLDPART_ID]}"
	data-model="vehicle">
	<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">旧件审核</div>
		</div>
		<div class="model-body">
			<div class="panel panel-default">
				<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-4 ">
					<div class="form-group">
						<label class="control-label col-xs-4">审核意见:</label>
						<div class="col-xs-8">
							 <textarea id="auditRemark" name="auditRemark" cols="62" rows="3" maxlength="600" 
							onkeydown="www_zzjs_net(this.form.auditRemark,this.form.remLen,200)" onkeyup="www_zzjs_net(this.form.auditRemark,this.form.remLen,200)" data-fieldName="REMARK"></textarea>
							    共可输入200字，还剩<span  id="remLen"><font color="red">200</font></span>字 
						</div>
					</div>
				</div>
				</div>
				<div class="row">
				<div class="col-xs-12">
					<div class="form-group">
						<label class="control-label col-xs-3">审核结果：</label>
						<div class="col-xs-6">
							<div class="radio-list">
								<label class="radio-inline col-xs-2"><input type="radio"
								checked="checked"	name="oldpartStatus" data-isinit="true" value="91121003"><span>接收</span>
								</label> <label class="radio-inline col-xs-2"><input
									type="radio" name="oldpartStatus" data-isinit="true"
									value="91121004"><span>拒绝</span> </label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
					<div class="col-xs-12 col-sm-7 ">
							<div class="form-group">
								<label class="control-label col-xs-4">旧件接收仓库</label>
								<div class="col-xs-8">
								<select class="bs-select form-control required" id="storAddressId" name="storAddressId"
									data-url="/approve/house" data-model="vehicle" 
									data-lableDesc="STOR_NAME" data-labelValue="STOR_ID">
								</select>
								</div>
							</div>
						</div>
			</div>
			</div>
		</div>
			<div class="model-footer center-block">
		<div style="text-align: center">
			<a data-url="/approve/{[OLDPART_ID]}" data-model="vehicle" data-method="PUT"
				data-callBack="true" class="btn blue" data-toggle="confirmation">
				<i class="fa fa-save"></i>审核
			</a> <a data-goback="page" id = "undo2"
				href="vehicle/oldpart/approve/searchApprove.html"
				class="btn blue ajaxify"><i class="fa fa-reply"></i>返回</a>
		</div>
	</div>
	</form>
	</div>





<script type="text/javascript">
function www_zzjs_net(field, countfield, maxlimit) {
	console.log("123456");
	if (field.value.length > maxlimit)
	field.value = field.value.substring(0,maxlimit);
	else
	document.getElementById('remLen').innerHTML = '<font color="red">'+(maxlimit - field.value.length)+'</font>';
}
$(document).one("onload.dms",function(event,container){
			new Datatable()
					.initPagination({
						src : "dms_table",
						container : container,
						url : dmsCommon.getDmsPath()["vehicle"]
								+ "/approve/{[OLDPART_ID]}",
						rowID : "OLDPART_ID",
						sortName : "",
						sortOrder : "",
						autoHeight:false,
						pageSize:5,
						columns : [
						            {
									field : "DEALER_CODE",
									title : "经销商代码"
								}, {
									field : "DEALER_NAME",
									title : "经销商名称"
								}, {
									field : "RETURN_BILL_NO",
									title : "回运单号"
								}, {
									field : "OLDPART_ORDER",
									title : "旧件序号"
								}, {
									field : "BALANCE_NO",
									title : "结算单号",
								}, {
									field : "REPAIR_NO",
									title : "工单号"
								}, {
									field : "CLAIM_NUMBER",
									title : "索赔单号"
								}, {
									field : "VIN",
									title : "VIN码"
								}, {
									field : "OLDPART_NO",
									title : "旧件代码"
								}, {
									field : "OLDPART_NAME",
									title : "旧件名称"
								}, {
									field : "PART_FEE",
									title : "含税索赔价",
								}, {
									field : "BRAND_CODE",
									title : "品牌"
								}, {
									field : "SERIES_NAME",
									title : "车系"
								}, {
									field : "MODEL_NAME",
									title : "车型"
								}, {
									field : "OLDPART_TYPE",
									title : "旧件类型"
										,codeFormat : {type:"oemDict",codeType:"9111"}
								}, {
									field : "RETURN_BILL_TYPE",
									title : "回运类型"
										,codeFormat : {type:"oemDict",codeType:"9113"}
								}, {
									field : "CLAIM_APPLY_DATE",
									title : "索赔申请日期"
								}, {
									field : "CLAIM_AUDIT_DATE",
									title : "索赔申请通过日期",
								}, {
									field : "MSV",
									title : "MSV码"
								}, {
									field : "PURCHASE_DATE",
									title : "购车日期"
								}, {
									field : "REPAIR_DATE",
									title : "维修日期"
								}, {
									field : "REPAIR_TYPE",
									title : "维修类型"
										,codeFormat : {type:"oemDict",codeType:"4100"}
								}, {
									field : "OUT_MILEAGE",
									title : "行驶里程"
								}, {
									field : "REPAIR_REMARK",
									title : "维修备注"
								}, {
									field : "OLDPART_STATUS",
									title : "旧件状态"
										,codeFormat : {type:"oemDict",codeType:"9112"}
								}, {
									field : "RECEIVE_DATE",
									title : "清点日期"
								}]
   				
					});
		$("a[data-callBack='true']", container).on(	"callBack.dms",	function(event, response) {
			//关闭窗口
			$("a[data-goback='page']", container).click();
			//刷新表格
			$("#dms_table", getElementContext()).dmsTable().refreshTableWithForm();
		});
		
	})
	
</script>
