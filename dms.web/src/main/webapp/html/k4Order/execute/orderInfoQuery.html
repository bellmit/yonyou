<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="panel-body">
				<div class="row ">

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">品牌</label>
							<div class="col-xs-6">
								<select id="brandId" name="brandId"
									class="bs-select form-control" name="brandCode"
									data-url="/basedata/material/brand/90081002"
									data-model="manage" data-labelValue="BRAND_ID"
									data-lableDesc="BRAND_NAME">
								</select>

							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">车系</label>
							<div class="col-xs-6">
								<select id="seriesId" name="seriesId" parent="brandId"
									class="bs-select form-control" name="seriesName"
									data-url="/basedata/material/series/90081002/{[brandId]}"
									data-model="manage" data-labelValue="SERIES_ID"
									data-lableDesc="SERIES_NAME">
								</select>

							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">车款</label>
							<div class="col-xs-6">
								<select id="groupId" name="groupId" parent="seriesId"
									class="bs-select form-control" name="groupName"
									data-url="/basedata/material/group/90081002/{[seriesId]}"
									data-model="manage" data-labelValue="GROUP_ID"
									data-lableDesc="GROUP_NAME">
								</select>

							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">年款</label>
							<div class="col-xs-6">
								<select id="modelId" name="modelId" parent="groupId"
									class="bs-select form-control" name="modelYear"
									data-url="/basedata/material/modelYear/90081002/{[groupId]}"
									data-model="manage" data-labelValue="MODEL_YEAR"
									data-lableDesc="MODEL_YEAR">
								</select>

							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">颜色</label>
							<div class="col-xs-6">
								<select id="colorId" name="colorId" parent="modelId"
									class="bs-select form-control" name="colorName"
									data-url="/basedata/material/color/90081002/{[groupId]}/{[modelId]}"
									data-model="manage" data-labelValue="COLOR_CODE"
									data-lableDesc="COLOR_NAME">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">内饰</label>
							<div class="col-xs-6">
								<select id="trimId" name="trimId" parent="colorId"
									class="bs-select form-control" name="trimName"
									data-url="/basedata/material/trim/90081002/{[groupId]}/{[modelId]}/{[colorId]}"
									data-model="manage" data-labelValue="TRIM_CODE"
									data-lableDesc="TRIM_NAME">
								</select>

							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"
						data-tableSelect="true">
						<div class="form-group">
							<label class="control-label col-xs-6">经销商代码</label>
							<div class="col-xs-6">
								<div class="input-group">
									<input id="dealerCode" readonly name="dealerCode"
										class="form-control" type="text" data-fieldName="dealer_code" />
									<span class="input-group-btn">
										<button class="btn default btn-sm" type="button"
											data-url="manage/basedata/dealers/searchDealers.html"
											data-toggle="modal" data-width="modal-lg">
											<i class="fa fa-list-alt"></i>
										</button>
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>

					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">VIN</label>
							<div class="col-xs-6">
								<input type="text" class="form-control" id="vin" name="vin">
							</div>
						</div>
					</div>
					<!--/span-->
					<!-- 销售大区 -->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">销售大区</label>
							<div class="col-xs-6">
								<select id="bigOrg" class="bs-select form-control"
									name="bigOrgName" data-url="/basedata/orgManage/bigOrg"
									data-model="manage" data-labelValue="BIG_ORG"
									data-lableDesc="BIG_ORG_NAME" multiple data-live-search="fales"
									data-size="5" data-existsDefault="false">
								</select>
							</div>
						</div>
					</div>

					<!-- 销售小区 -->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">销售小区</label>
							<div class="col-xs-6">
								<select id="smallOrg" parent="bigOrg"
									class="bs-select form-control" name="smallOrgName"
									data-url="/basedata/orgManage/{[bigOrg]}/smallOrg"
									data-model="manage" data-labelValue="SMALL_ORG"
									data-lableDesc="SMALL_ORG_NAME" multiple
									data-live-search="fales" data-size="5"
									data-existsDefault="false">
								</select>
							</div>
						</div>
					</div>


					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">车辆节点</label>
							<div class="col-xs-6">
								<select id="vehicleNode" name="vehicleNode"
									class="bs-select form-control" data-type="oemDict"
									data-dictCode="1151">
								</select>
							</div>
						</div>
					</div>




					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">订单类型</label>
							<div class="col-xs-6">
								<select id="orderType" name="orderType"
									class="bs-select form-control" data-type="oemDict"
									data-dictCode="2083">
								</select>
							</div>
						</div>
					</div>





					<div class="col-xs-12 col-sm-12 col-md-8 col-lg-6">
						<div class="form-group">
							<label class="control-label col-xs-6 col-sm-3 ">订单提报日期</label>
							<div class="col-xs-6 col-sm-9">
								<div class="input-group input-daterange" data-opens="right">
									<input type="text" class="form-control" readonly
										name="orderDateStart"> <span class="input-group-addon">至</span>
									<input type="text" class="form-control" readonly
										name="orderDateEnd"> <span class="input-group-btn">
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">超过几天未付款</label>
							<div class="col-xs-6">
								<input type="text" class="form-control" id="delay" name="delay">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-6">订单审批状态</label>
							<div class="col-xs-6">
								<select id="orderState" name="orderState"
									class="bs-select form-control" data-type="oemDict"
									data-dictCode="2007">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-8 col-lg-6">
						<div class="form-group">
							<label class="control-label col-xs-6 col-sm-3">指派分配日期</label>
							<div class="col-xs-6 col-sm-9">
								<div class="input-group input-daterange" data-opens="right">
									<input type="text" class="form-control" readonly
										name="allotDateStart"> <span class="input-group-addon">至</span>
									<input type="text" class="form-control" readonly
										name="allotDateEnd"> <span class="input-group-btn">
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
				


					<div class="col-xs-12 col-sm-12 col-md-8 col-lg-6">
						<div class="form-group">
							<label class="control-label col-xs-6 col-sm-3 ">资源池上传日期</label>
							<div class="col-xs-6 col-sm-9">
								<div class="input-group input-daterange" data-opens="right">
									<input type="text" class="form-control" readonly
										name="commonDateStart"> <span
										class="input-group-addon">至</span> <input type="text"
										class="form-control" readonly name="commonDateEnd"> <span
										class="input-group-btn">
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
									<div class="form-group">
										<label class="control-label col-xs-6">付款方式</label>
										<div class="col-xs-6">
											<select id="vehicleSalePayType" name="vehicleSalePayType"
												class="bs-select form-control" data-type="oemDict"
												data-dictCode="2027">
											</select>
										</div>
									</div>
								</div>



				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="modal-footer center-block ">
							<a href="javascript:;" class="btn blue" data-onclickEvent="true"
								id="conutquery"> <i class="fa fa-search"></i> 汇总查询
							</a> <a href="javascript:;" class="btn blue" data-onclickEvent="true"
								id="conutdetailquery"> <i class="fa fa-search"></i> 明细查询
							</a>
							<div class="query-btn"
								style="display: inline; margin-bottom: 5px; margin-left: 5px;">
								<a class="query-btn btn blue "><i class="fa fa-undo"></i>重置
								</a>
							</div>
						</div>
					</div>
				</div>

				<div class="panel panel-default table-panel" id="countId">
					<div class="panel-heading">
						<div class="pannel-name">汇总查询列表</div>
						<div class="pannel-button">
							<div class="btn-group btn-group-sm">
								<a href="javascript:;"
									data-url="/orderInfoQuery/orderInfo/totalDownload"
									data-model="vehicle" data-method="downLoad"
									data-toggle="confirmation" class="btn btn-outline "><i
									class="fa fa-download"></i>汇总下载</a>
							</div>
						</div>

					</div>
					<div class="panel-body">
						<table
							class="table table-striped table-bordered table-hover table-responsive"
							id="forecastQueryTotal_table"></table>
					</div>
				</div>
				<div class="panel panel-default table-panel hidden" id="detailId">
					<div class="panel-heading">
						<div class="pannel-name">明细查询列表</div>
						<div class="pannel-button">
							<div class="btn-group btn-group-sm">
								<a href="javascript:;"
									data-url="/orderInfoQuery/orderInfo/detailDownload"
									data-model="vehicle" data-method="downLoad"
									data-toggle="confirmation" class="btn btn-outline "><i
									class="fa fa-download"></i>明细下载</a>
							</div>
						</div>
					</div>
					<div class="panel-body">
						<table
							class="table table-striped table-bordered table-hover table-responsive"
							id="forecastQueryDetail_table"></table>
					</div>
				</div>
			</div>
		</div>
	</form>


</div>
<script type="text/javascript">

$(document).one("onload.dms",function(event,container){
	//汇总查询
	new Datatable().initPagination({
		src : "forecastQueryTotal_table",
		container:container,
		   url : dmsCommon.getDmsPath()["vehicle"] + "/orderInfoQuery/orderInfo/totalQuery",
		   rowID : "MODEL_CODE",
		   sortName : "MODEL_CODE",
		   pageSize:5,
		   autoHeight:false,
		   isQueryFirst:false,
			columns : [ 
			           {field : "MODEL_CODE",title : "车型代码"},
					    {field : "GROUP_NAME",title : "车型描述"},
					    {field : "ORDER_TYPE",title : "订单类型",codeFormat : {type:"oemDict",codeType:"2083"}},
					    {field : "TOTAL1",title : "提报数量"},
					    {field : "TOTAL2",title : "审核数量"},
					    {field : "TOTAL3",title : "发运数量"}	         
			        
			],
			onLoadSuccess : function() {
				$("#forecastQueryTotal_table",container).dmsTable().bootstrapTable('resetView');
			}
		});
	
	
	
	//明细查询
	new Datatable().initPagination({
		src : "forecastQueryDetail_table",
		container:container,
		rowID : "ORDER_ID",
		sortName : "ORDER_ID",
		url : dmsCommon.getDmsPath()["vehicle"] + "/orderInfoQuery/orderInfo/detailQuery",
		pageSize:5,
		autoHeight:false,
		isQueryFirst:false,
		columns : [ 
				    {field : "ORG_NAME",title : "销售大区"},
				    {field : "ORG_NAME_SMALL",title : "销售小区"},					    
				    {field : "SWT_CODE",title : "SAP代码"},
				    {field : "DEALER_CODE",title : "经销商代码"},
				    {field : "DEALER_NAME",title : "经销商名称"},				    
				    {field : "CREATE_DATE",title : "资源池上传日期"},
				    {field : "CREATE_DATE2",title : "指派分配日期"},
				    {field : "DEAL_ORDER_AFFIRM_DATE",title : "订单提报日期"},
				    {field : "ORDER_TYPE",title : "订单类型",codeFormat : {type:"oemDict",codeType:"2083"}},
				    {field : "ORDER_STATUS",title : "订单状态",codeFormat : {type:"oemDict",codeType:"2007"}},
				    {field : "PAYMENT_TYPE",title : "付款方式"},
				    {field : "VIN",title : "VIN"},
				    {field : "VPC_PORT",title : "VPC港口",codeFormat : {type:"oemDict",codeType:"1392"}},
				    {field : "NODE_STATUS",title : "车辆节点状态",codeFormat : {type:"oemDict",codeType:"1151"}},
				    {field : "REMARK",title : "车辆备注",codeFormat : {type:"oemDict",codeType:"1121"}},
				    {field : "VEHICLE_USAGE",title : "车辆用途"},
				    {field : "MODEL_CODE",title : "车型代码"},				    
				    {field : "GROUP_NAME",title : "车型描述" },
				    {field : "COLOR_NAME",title : "颜色" },
				    {field : "TRIM_NAME",title : "内饰" },					    					    
				    {field : "ORDER_NO",title : "整车订单号" },
				    {field : "ETA",title : "预计交付日期"},
				    {field : "SWT_AFFIRM_DATE",title : "中进收款时间"}, 
				    {field : "COMMERCIAL_NO",title : "商检单号" },
				    {field : "CERTIFICATION_NO",title : "进出口货物证明书号"},		    
				    {field : "ORDER_ID",title : "明细",operateFormat : [
				    		{type:"edit",url:"k4Order/execute/queryMsg.html",openWidth:"modal-lg",doubleClick:true}
				    	]
				     }	
		          
		 ],
		 onLoadSuccess : function() {
			$("#forecastQueryDetail_table",container).dmsTable().bootstrapTable('resetView');
		}
	});
	
	
	//绑定汇总查询按钮回调
	$("#conutquery[data-onclickEvent='true']",container).on("dms.click",function(event){
		$("#countId",container).removeClass("hidden");
		$("#detailId",container).addClass("hidden");
		$("#forecastQueryTotal_table",container).dmsTable().refreshTableWithForm();
		
	});
	
	//绑定明细查询按钮回调
	$("#conutdetailquery[data-onclickEvent='true']",container).on("dms.click",function(event){
		$("#detailId",container).removeClass("hidden");
		$("#countId",container).addClass("hidden");
		$("#forecastQueryDetail_table",container).dmsTable().refreshTableWithForm();
	});
	
});
</script>
