<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="panel-body">
				<!-- /span -->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4">经销商</label>
						<div class="col-xs-8">
							<select id="DEALER_CODE" class="bs-select form-control"
								name="DEALER_CODE"
								data-url="/stockManage/safeguard/findDealerInfo"
								data-value="{[userInfo.dealerCode]}" data-model="customer"
								data-labelValue="dealer_code" data-lableDesc="DEALER_SHORTNAME">
							</select>
						</div>
					</div>
				</div>
				<!-- /span -->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4 ">车牌号</label>
						<div class="col-xs-8">
							<input type="text" class="form-control" id="license" name="license"> 
						</div>
					</div>
				</div>
				<!-- /span -->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4 ">发动机号</label>
						<div class="col-xs-8">
							<input type="text" class="form-control" id="engineNo" name="engineNo">
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4 ">VIN</label>
						<div class="col-xs-8">
							<input type="text" class="form-control" id="vin" name="vin" />
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4">车主编号</label>
						<div class="col-xs-8">
							<div class="input-group">
								<input id="ownerNo" name="ownerNo"
									data-url="/basedata/employees" data-beforeRequest="true"
									class="form-control" data-fieldName="CUSTOMER_NAME"
									type="text" /> <span class="input-group-btn">
									<button class="btn default btn-sm" type="button" id="find"
										name="find"
										data-url="customer/suggestRepairQuery/searchOwner.html"
										data-toggle="modal" data-width="modal-lg">
										<i class="fa fa-sitemap"></i>
									</button>
									<button class="btn default input-clear" id="clear" name="clear"
										type="button">
										<i class="fa fa-close"></i>
									</button>
								</span>
							</div>
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4 "></label>
						<div class="col-xs-8">
							<input type="text" class="form-control" id="ownerName2" name="ownerName2" />
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">

					<div class="form-group">
						<label class="control-label col-xs-2">建议日期</label>
						<div class="col-xs-10">
							<div class="input-group input-daterange" data-defaultDays="30">
								<input type="text" class="form-control" name="suggestBeginDate" id="suggestBeginDate" data-fieldName="SUGGEST_DATE" /> 
								<span class="input-group-addon">至</span> 
								<input type="text" class="form-control" name="suggestBeginDate" id="suggestBeginDate" data-fieldName="SUGGEST_DATE" /> 
								<span class="input-group-btn">
									<button class="btn default input-clear" type="button">
										<i class="fa fa-close"></i>
									</button>
								</span>
							</div>
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4 ">车主地址</label>
						<div class="col-xs-8">
							<input type="text" class="form-control" id="address" name="address" />
						</div>
					</div>
				</div>
				<!--/span-->
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					<div class="form-group">
						<label class="control-label col-xs-4">客户经理</label>
						<div class="col-xs-8">
							<select id="applicant" name="applicant"
								data-fieldName="APPLICANT" class="bs-select form-control "
								data-url="/basedata/employees/-1/salesConsultant"
								data-model="manage" data-labelValue="USER_ID"
								data-lableDesc="USER_NAME">
							</select>
						</div>
						<!-- data-value="{[userInfo.userId]}" -->
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn btn-sm blue"> <i
								class="fa fa-search"></i> 查询
							</a> <a href="javascript:;" class="btn btn-sm blue"><i
								class="fa fa-undo"></i> 重置</a>
						</div>
					</div>
				</div>
			</div>
			<div class="panel panel-default table-panel">
				<div class="panel-heading">
					<div class="pannel-name">维修建议查询</div>
					<div class="pannel-button">
						<div class="btn-group btn-group-sm">
							<a href="javascript:;" data-url="/customer/suggestRepair/export"
								data-model="customer" data-method="downLoad" id="excel" 
								data-toggle="confirmation" class="btn btn-outline "> <i
								class="fa fa-download"></i>导出
							</a>
						</div>
					</div>
				</div>
			</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="dms_repair">
			</table>
		</div>
		<div class="row">
			<div class="col-xs-12 col-md-12 col-lg-12">
				<div class="panel panel-default table-panel">
					<div class="panel-heading"></div>
					<div class="panel-body">
						<table
							class="table table-striped table-bordered table-hover table-responsive"
							id="dms_price">
						</table>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>
<script type="text/javascript">
	$(document).one("onload.dms", function(event, container) {
		
		new Datatable().initPagination({
			src : "dms_repair",
			rowID : "VIN",
			container : container,
			url : dmsCommon.getDmsPath()["customer"] + "/customer/suggestRepair",
			sortName : "VIN",
			sortOrder : "asc",
			autoHeight : false,
			undefinedText : "",
			columns : [
	        {field : "dealer_shortname",title : "经销商"}, 
	        {field : "LABOUR_CODE",title : "项目代码"}, 
	        {field : "LABOUR_NAME",title : "维修项目名称"}, 
	        {field : "STD_LABOUR_HOUR",title : "标准工时"}, 
	        {field : "LABOUR_AMOUNT",title : "工时费"}, 
	        {field : "REASON",title : "不修原因",codeFormat : {type : "dict",codeType : "1251"}},  
	        {field : "SUGGEST_DATE",title : "建议日期",dateFormat : {format : "YYYY-MM-DD"}},
	        {field : "VIN",title : "VIN"}, 
	        {field : "LICENSE",title : "车牌号"},
	        {field : "ENGINE_NO",title : "发动机号"},
	        {field : "SERVICE_ADVISOR",title : "服务专员"}, 
	        {field : "ADDRESS",title : "车主地址"}
	        ],
			
		});	
		
		new Datatable().initPagination({
			src : "dms_price",
			rowID : "PART_NO",
			container : container,
			url : dmsCommon.getDmsPath()["customer"] + "/customer/suggestRepair",
			sortName : "PART_NO",
			sortOrder : "asc",
			autoHeight : false,
			undefinedText : "",
			columns : [
	        {field : "dealer_shortname",title : "经销商"}, 
	        {field : "PART_NO",title : "配件代码"}, 
	        {field : "PART_NAME",title : "配件名称"}, 
	        {field : "QUANTITY",title : "数量"}, 
	        {field : "SALES_PRICE",title : "单价"}, 
	        {field : "REASON",title : "不修原因",codeFormat : {type : "dict",codeType : "1251"}},  
	        {field : "SUGGEST_DATE",title : "建议日期",dateFormat : {format : "YYYY-MM-DD"}},
	        {field : "VIN",title : "VIN"}, 
	        {field : "LICENSE",title : "车牌号"},
	        {field : "ENGINE_NO",title : "发动机号"},
	        {field : "SERVICE_ADVISOR",title : "客户经理"}, 
	        {field : "ADDRESS",title : "车主地址"}
	        ],
		});
	});
</script>