<div class="dms-edit ajaxrest"
	data-url="/customer/insurance/dict/{[VIN]}/duct/{[OWNER_NO]}"
	data-model="customer" data-pageInitCallBack="true">
	<div class="dms-add">
		<form class="form-horizontal">
			<div class="modal-header">
				<div class="modal-title">提醒记录</div>
				<div class="modal-close">
					<a data-dismiss="modal" class="btn btn-lg"> <i
						class="fa fa-remove"></i></a>
				</div>
			</div>
			<div class="modal-body">
				<div class="tabbable-retail ">
					<div class="tab-content">
						<div class="tab-pane fade in active" id="tab_basreceive">
							<div class="panel-body" data-tableRetailSelect="true">
								<div class="row">
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">保修公司</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="insurationName" name="insurationName"
														class="form-control" type="text"
														data-fieldName="INSURATION_NAME" disabled="disabled" /> <input
														type="hidden" name="vin" id="vin" /> <input type="hidden"
														name="ownerNo" id="ownerNo" />
												</div>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">保险结束日期</label>
											<div class="col-xs-8">
												<div class="input-group date date-picker"
													data-defaultDays="7">
													<input type="text" class="form-control" disabled="disabled"
														data-fieldName="INSURANCE_END_DATE"
														name="insuranceEndDate" id="insuranceEndDate" /><span
														class="input-group-btn">
														<button class="btn default input-clear" type="button">
															<i class="fa fa-close"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6">
										<div class="form-group">
											<label class="control-label col-xs-2"><span
												style="color: red;">*</span>提醒内容</label>
											<div class="col-xs-10">
												<textarea id="remindContent" name="remindContent"
													data-fieldName="REMIND_CONTENT"
													class="form-control required" rows="3" cols=""></textarea>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6">
										<div class="form-group">
											<label class="control-label col-xs-2">客户反馈</label>
											<div class="col-xs-10">
												<textarea id="customerFeedback" name="customerFeedback"
													data-fieldName="CUSTOMER_FEEDBACK" class="form-control"
													rows="3" cols=""></textarea>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">提醒方式</label>
											<div class="col-xs-8">
												<select id="remindWay" class="bs-select form-control"
													name="remindWay" data-dictCode="1128"
													data-fieldName="REMIND_WAY">
												</select>
											</div>
										</div>
									</div>
									<!-- /span -->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">提醒人</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="reminder" name="reminder" class="form-control"
														type="text" disabled="disabled"
														value="{[userInfo.userName]}" />
												</div>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">提醒状态</label>
											<div class="col-xs-8">
												<select id="remindStatus" class="bs-select form-control"
													name="remindStatus" data-dictCode="1382"
													data-fieldName="REMIND_STATUS">
												</select>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">提醒失败原因</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="remindFailReason" name="remindFailReason"
														class="form-control" type="text"
														data-fieldName="REMIND_FAIL_REASON" disabled="disabled" />
												</div>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6">
										<div class="form-group">
											<label class="control-label col-xs-2">备注</label>
											<div class="col-xs-10">
												<textarea id="remark" name="remark" data-fieldName="REMARK"
													class="form-control" rows="3" cols=""></textarea>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">续保战败原因</label>
											<div class="col-xs-8">
												<select id="renewlFailedReason"
													class="bs-select form-control required"
													name="renewlFailedReason" data-dictCode=""
													data-fieldName="RENEWAL_FAILED_REASON" disabled="disabled">
												</select>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6 col-sm-6">
										<div class="form-group">
											<label class="control-label col-xs-4">续保战败日期</label>
											<div class="col-xs-8">
												<div class="input-group date date-picker"
													data-defaultDays="7">
													<input type="hidden" data-fieldName="" id="" /> <input
														type="text" class="form-control required"
														data-fieldName="RENEWAL_FAILED_DATE"
														name="renewalFailedDate" disabled="disabled"
														id="renewalFailedDate" /><span class="input-group-btn">
														<button class="btn default input-clear" type="button">
															<i class="fa fa-close"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-6">
										<div class="form-group">
											<label class="control-label col-xs-2">战败备注</label>
											<div class="col-xs-10">
												<textarea id="renewalRemark" name="renewalRemark"
													data-fieldName="RENEWAL_REMARK" disabled="disabled"
													class="form-control" rows="3" cols=""></textarea>
											</div>
										</div>
									</div>
									<!--/span-->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer center-block">
				<a data-url="/customer/insurance/vins" data-model="customer"
					data-method="POST" data-callBack="true" data-beforeRequest="true"
					class="btn blue" data-toggle="confirmation"> <i
					class="fa fa-save "></i>保存
				</a> <a data-dismiss="modal" class="btn blue"> <i class="fa fa-undo"></i>取消
				</a>
			</div>
		</form>
	</div>
</div>
<script type="text/javascript">
	$(document).one(
			"onload.dms",
			function(event, container) {

				var vins = $("#vin2", getElementContext()).val();
				$("#vin", container).val(vins);

				var ownerNos = $("#ownerNo2", getElementContext()).val();
				$("#ownerNo", container).val(ownerNos);

				var nextMaintainMileages = $("#nextMaintainMileage2",
						getElementContext()).val();
				$("#nextMaintainMileage", container).val(nextMaintainMileages);
				//新增页面回调函数
				$("a[data-callBack='true']", container).on(
						"callBack.dms",
						function(event, response) {
							//关闭窗口
							$("a[data-dismiss='modal']", container).click();
							//刷新表格
							$("#dms_insurance", getElementContext()).dmsTable()
									.refreshTableWithForm();
						});

				/* $("a[data-beforeRequest='true']",container).on("beforeRequest.dms",function(event,returnResult){
					if(true){
						//获取提醒内容
						var context = $("#remindContent",container).val();
						//设置保养里程语句
						var first = "下次保养里程由"+$("#nextMaintainMileage1",container).val()+"改为"+$("#nextMaintainMileage",container).val();
						var second = "下次保养日期由"+$("#nextMaintainDate1",container).val()+"改为"+$("nextmaintainDate",container).val();
						//往提醒内容赋值
						$("#remindContent",container).val(context+"("+first+")"+"("+second+")");
						returnResult.status = true;
					}else{
						returnResult.status = false;
					}
				}); */
			});
</script>