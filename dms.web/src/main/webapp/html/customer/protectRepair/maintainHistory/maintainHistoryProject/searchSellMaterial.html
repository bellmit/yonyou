<div class="dms-search">
	<form class="form-horizontal">
		<div class="modal-body">
			<div class="panel panel-default table-panel">
				<div class="panel-heading">
					<div class="pannel-name">销售材料</div>
					<div class="pannel-button">
						<div class="btn-group btn-group-sm">
						
						</div>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="sell_material">
					</table>
				</div>
			</div>
		</div>
	</form>
</div>
<script type="text/javascript">
$(document).one("onload.dms",function(event,container){
	//销售材料
	new Datatable().initPagination({
		src : "sell_material",
		container:container,
		rowID:"PART_NO",
		url : dmsCommon.getDmsPath()["customer"] + "/customer/solicitude/maintainHistory/maintainHistoryProject/{[RO_NO]}/SellMaterial",
		sortName : "PART_NO", //当需要默认排序时写，否则不写，默认情况下不写，sortOrder同样
		sortOrder : "asc",
		pageSize:5,
		autoHeight:false,
		columns : [
			    {field : "MANAGE_SORT_CODE",title : "收费类别"}, 
	            {field : "CHARGE_PARTITION_CODE",title : "收费区分"},
	            {field : "STORAGE_CODE",title : "仓库代码"},
	            {field : "PART_NO",title : "配件代码"}, 
	            {field : "PART_NAME",title : "配件名称"},
	            {field : "UNIT_CODE",title : "计量单位"},
	            {field : "PART_QUANTITY",title : "配件销售数量"}, 
	            {field : "PART_SALES_PRICE",title : "配件销售单价"}, 
	            {field : "PART_SALES_AMOUNT",title : "配件销售金额"},
	            {field : "LABOUR_PRICE",title : "配件成本金额"},
	            {field : "",title : "配件成本单价"}, 
	            {field : "DISCOUNT_AMOUNT",title : "优惠金额"},
	            {field : "DISCOUNT",title : "折扣率"},
	            {field : "RECEIVE_AMOUNT",title : "实收金额"},
	            {field : "IS_FINISHED",title : "是否入账"}
		       ]
	});
	$("a[id='sell_material']",getElementContext()).on("dms.click",function(event){
		$("#sell_material",container).dmsTable().refreshUrl(dmsCommon.getDmsPath()["customer"] + "/customer/solicitude/maintainHistory/maintainHistoryProject/"+$("#RO_NO").val()+"/SellMaterial");
	 });
	 $("a[id='SellMaterial']",getElementContext()).click();
		$("#RO_NO").bindChange(function(obj){
	    $("#sell_material",container).dmsTable().refreshUrl(dmsCommon.getDmsPath()["customer"] + "/customer/solicitude/maintainHistory/maintainHistoryProject/"+$("#RO_NO").val()+"/SellMaterial");
	});
});	
</script>