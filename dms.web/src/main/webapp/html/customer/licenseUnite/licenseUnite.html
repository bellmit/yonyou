<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="panel-heading">
				<div class="pannel-name">车辆过户</div>
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-5"
						data-seldate='true'>
						<div class="panel panel-default" data-tableSelect='true'>
							<div class="panel-heading">
								<div class="pannel-name">原车</div>
							</div>
							<div class="panel-body">
								<div class="row" data-tableSelect='true'>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车牌号</label>
											<div class="col-xs-8">
												<input id="license" t="13" name="license"
													class="form-control " type="text" data-fieldName="" />
											</div>
											<a id="add"
												data-url="repair/order/repair/searchAbout/queryCar.html"
												class="btn btn-outline hidden" data-toggle="modal"
												data-width="modal-lg"> <i class="fa fa-plus-square"></i>
											</a>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">原VIN</label>
											<div class="col-xs-8">
												<input id="vin2" name="vin2" data-fieldName=""
													class="form-control" type="text" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主编号</label>
											<div class="col-xs-8">
												<input id="oldLicense" name="oldLicense" class="form-control "
													type="text" data-fieldName="LICENSE" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">VIN</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="oldVin" name="oldVin" class="form-control "
														disabled="disabled" type="text" data-fieldName="VIN" /> <span
														class="input-group-btn">
														<button class="btn default btn-sm" type="button" id="vin1"
															data-beforeShowEvent='true' disabled="disabled"
															data-url="customer/vehicleTransfer/vehicleDetail.html"
															data-toggle="modal" data-width="modal-lg">
															<i class="fa fa-sitemap"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">发动机号</label>
											<div class="col-xs-8">
												<input id="oldEngineNo" name="oldEngineNo" type="text"
													disabled="disabled" class="form-control"
													data-dictCode="ENGINE_NO" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">品牌</label>
											<div class="col-xs-8">
												<select id="oldBrand" class="bs-select form-control"
													disabled="disabled" data-ajaxSync="true" name="oldBrand"
													data-fieldName="BRAND" data-url="/basedata/brandsdict"
													data-model="manage" data-labelValue="BRAND_CODE"
													data-lableDesc="BRAND_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车系</label>
											<div class="col-xs-8">
												<select id="oldSeries" class="bs-select form-control"
													name="oldSeries" data-url="/basedata/selectSeries"
													disabled="disabled" data-model="manage"
													data-labelValue="SERIES_CODE" data-fieldName="SERIES"
													data-lableDesc="SERIES_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车型</label>
											<div class="col-xs-8">
												<select id="oldModel" class="bs-select form-control"
													name="oldModel" data-url="/basedata/selectModel"
													disabled="disabled" data-model="manage"
													data-labelValue="MODEL_CODE" data-fieldName="MODEL"
													data-lableDesc="MODEL_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车辆备注</label>
											<div class="col-xs-8">
												<input type="text" class="form-control" id="oldRemark"
													disabled="disabled" name="oldRemark" data-fieldName="REMARK">
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主编号</label>
											<div class="col-xs-8">
												<input id="oldOwnerNo" name="oldOwnerNo" data-fieldName="OWNER_NO"
													disabled="disabled" class="form-control" type="text" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4 ">车主性质</label>
											<div class="col-xs-8">
												<select class="bs-select form-control" name="oldOwnerProperty"
													id="oldOwnerProperty" data-dictCode="1190"
													data-fieldName="OWNER_PROPERTY" disabled="disabled">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="oldOwnerName" name="oldOwnerName"
														data-fieldName="OWNER_NAME" class="form-control"
														maxlength="120" type="text" disabled="disabled" /> <span
														class="input-group-btn">
														<button class="btn default btn-sm" type="button"
															data-beforeShowEvent='true' disabled="disabled" id="ownerName1"
															data-url="customer/vehicleTransfer/ownerDetail.html"
															data-toggle="modal" data-width="modal-lg">
															<i class="fa fa-sitemap"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主地址</label>
											<div class="col-xs-8">
												<input id="oldAddress" name="oldAddress" class="form-control"
													disabled="disabled" maxlength="120" type="text"
													data-fieldName="ADDRESS" />

											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">电话</label>
											<div class="col-xs-8">
												<input id="oldPhone" name="oldPhone" data-fieldName="PHONE"
													class="form-control mobile" type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">手机</label>
											<div class="col-xs-8">
												<input id="oldMobile" name="oldMobile" data-fieldName="MOBILE"
													class="form-control" type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人</label>
											<div class="col-xs-8">
												<input id="oldContactorName" name="oldContactorName"
													data-fieldName="CONTACTOR_NAME" class="form-control"
													disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人电话</label>
											<div class="col-xs-8">
												<input id="oldContactorPhone" name="oldContactorPhone"
													class="form-control" type="text"
													data-fieldName="CONTACTOR_PHONE" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人手机</label>
											<div class="col-xs-8">
												<input id="oldContactorMobile" name="oldContactorMobile"
													data-fieldName="CONTACTOR_MOBILE" class="form-control"
													type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4 col-sm-4">车主备注</label>
											<div class="col-xs-8 col-sm-8">
												<input type="text" class="form-control" id="oldRemark"
													name="oldRemark" data-fieldName="REMARK" disabled="disabled">
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">预收款</label>
											<div class="col-xs-8 ">
												<input id="oldPrePay" name="oldPrePay" data-fieldName="PRE_PAY"
													class="form-control" type="text" disabled="disabled"
													value=0.00 />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">欠款金额</label>
											<div class="col-xs-8 ">
												<input id="oldArrearageAmount" name="oldArrearageAmount"
													data-fieldName="ARREARAGE_AMOUNT" class="form-control"
													type="text" readonly="readonly" disabled="disabled"
													value=0.00 />
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>

					</div>

					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-2"></div>



										<div class="col-xs-12 col-sm-12 col-md-12 col-lg-5"
						data-seldate='true'>
						<div class="panel panel-default" data-tableSelect='true'>
							<div class="panel-heading">
								<div class="pannel-name">新车</div>
							</div>
							<div class="panel-body">
								<div class="row" data-tableSelect='true'>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车牌号</label>
											<div class="col-xs-8">
												<input id="license2" t="13" name="license2"
													class="form-control " type="text" data-fieldName="" />
											</div>
											<a id="add"
												data-url="repair/order/repair/searchAbout/queryCar.html"
												class="btn btn-outline hidden" data-toggle="modal"
												data-width="modal-lg"> <i class="fa fa-plus-square"></i>
											</a>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">新VIN</label>
											<div class="col-xs-8">
												<input id="vin2" name="vin2" data-fieldName=""
													class="form-control" type="text" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主编号</label>
											<div class="col-xs-8">
												<input id="license" name="license" class="form-control "
													type="text" data-fieldName="LICENSE" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">VIN</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="vin" name="vin" class="form-control "
														disabled="disabled" type="text" data-fieldName="VIN" /> <span
														class="input-group-btn">
														<button class="btn default btn-sm" type="button" id="vin1"
															data-beforeShowEvent='true' disabled="disabled"
															data-url="customer/vehicleTransfer/vehicleDetail.html"
															data-toggle="modal" data-width="modal-lg">
															<i class="fa fa-sitemap"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">发动机号</label>
											<div class="col-xs-8">
												<input id="engineNo" name="engineNo" type="text"
													disabled="disabled" class="form-control"
													data-dictCode="ENGINE_NO" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">品牌</label>
											<div class="col-xs-8">
												<select id="brand" class="bs-select form-control"
													disabled="disabled" data-ajaxSync="true" name="brand"
													data-fieldName="BRAND" data-url="/basedata/brandsdict"
													data-model="manage" data-labelValue="BRAND_CODE"
													data-lableDesc="BRAND_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车系</label>
											<div class="col-xs-8">
												<select id="series" class="bs-select form-control"
													name="series" data-url="/basedata/selectSeries"
													disabled="disabled" data-model="manage"
													data-labelValue="SERIES_CODE" data-fieldName="SERIES"
													data-lableDesc="SERIES_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车型</label>
											<div class="col-xs-8">
												<select id="model" class="bs-select form-control"
													name="model" data-url="/basedata/selectModel"
													disabled="disabled" data-model="manage"
													data-labelValue="MODEL_CODE" data-fieldName="MODEL"
													data-lableDesc="MODEL_NAME" data-alwaysRefresh="true">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车辆备注</label>
											<div class="col-xs-8">
												<input type="text" class="form-control" id="remark"
													disabled="disabled" name="remark" data-fieldName="REMARK">
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主编号</label>
											<div class="col-xs-8">
												<input id="ownerNo" name="ownerNo" data-fieldName="OWNER_NO"
													disabled="disabled" class="form-control" type="text" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4 ">车主性质</label>
											<div class="col-xs-8">
												<select class="bs-select form-control" name="ownerProperty"
													id="ownerProperty" data-dictCode="1190"
													data-fieldName="OWNER_PROPERTY" disabled="disabled">
												</select>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主</label>
											<div class="col-xs-8">
												<div class="input-group">
													<input id="ownerName" name="ownerName"
														data-fieldName="OWNER_NAME" class="form-control"
														maxlength="120" type="text" disabled="disabled" /> <span
														class="input-group-btn">
														<button class="btn default btn-sm" type="button"
															data-beforeShowEvent='true' disabled="disabled" id="ownerName1"
															data-url="customer/vehicleTransfer/ownerDetail.html"
															data-toggle="modal" data-width="modal-lg">
															<i class="fa fa-sitemap"></i>
														</button>
													</span>
												</div>
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">车主地址</label>
											<div class="col-xs-8">
												<input id="address" name="address" class="form-control"
													disabled="disabled" maxlength="120" type="text"
													data-fieldName="ADDRESS" />

											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">电话</label>
											<div class="col-xs-8">
												<input id="phone" name="phone" data-fieldName="PHONE"
													class="form-control mobile" type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">手机</label>
											<div class="col-xs-8">
												<input id="mobile" name="mobile" data-fieldName="MOBILE"
													class="form-control" type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人</label>
											<div class="col-xs-8">
												<input id="contactorName" name="contactorName"
													data-fieldName="CONTACTOR_NAME" class="form-control"
													disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人电话</label>
											<div class="col-xs-8">
												<input id="contactorPhone" name="contactorPhone"
													class="form-control" type="text"
													data-fieldName="CONTACTOR_PHONE" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4">联系人手机</label>
											<div class="col-xs-8">
												<input id="contactorMobile" name="contactorMobile"
													data-fieldName="CONTACTOR_MOBILE" class="form-control"
													type="text" disabled="disabled" />
											</div>
										</div>
									</div>
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<div class="form-group">
											<label class="control-label col-xs-4 col-sm-4">车主备注</label>
											<div class="col-xs-8 col-sm-8">
												<input type="text" class="form-control" id="remark"
													name="remark" data-fieldName="REMARK" disabled="disabled">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>



				</div>
				<div class="row">
					<div class="modal-footer center-block">
						<div col-xs-8 col-sm-8 col-md-8 col-lg-8>
							<a id="update" data-url="" data-model="customer" data-method="PUT"
								data-callBack="true" class="btn blue" id="saveBtn"
								name="saveBtn" data-beforeRequest="true"
								data-toggle="confirmation"> <i class="fa fa-save"></i>修改
							</a> <a href="javascript:;" class="btn blue" data-onclickEvent="true" id="cal" ><i
								class="fa fa-undo"></i> 取消</a>

						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>
<script type="text/javascript">
	$(document)
			.one(
					"onload.dms",
					function(event, container) {
						// 		$("#license2",container).setElementReadOnly();
						$("#vin2", container)
								.bindEnterEvent(
										function(obj) {
											dmsCommon
													.ajaxRestRequest({
														url : dmsCommon
																.getDmsPath()['repair']
																+ "/basedata/queryByLinsence/license2",
														data : {
															'vin' : $("#vin2",
																	container)
																	.val()
														},
														sucessCallBack : function(
																data) {
															$(
																	"div[data-tableSelect='true']",
																	container)
																	.initHtmlContent(
																			data);
														}
													});

										});
						$("#license2", container).bindEnterEvent(function(obj) {
							$("#add", container).click();
							$("#vin1", container).removeAttr("disabled");
							$("#ownerName1", container).removeAttr("disabled");
							$("#ownerName11", container).removeAttr("disabled");
						});
						$("a[data-onclickEvent='true']",container).on("dms.click",function(){
							dmsCommon.refreshPageByUrl("customer/lossVehicleTraceTask/lossVehicleTraceTask.html",container);//刷新页面
						});
						$("a[data-callBack='true']", container).on(
								"callBack.dms",
								function(event, response) {//data-tableSelect='true'
									$("div[data-tableSelect='true']",getElementContext()).initHtmlContent(response);
								});
						
						$("button[data-beforeShowEvent='true']", container).on(
								"beforeShow.dms",
								function(event, returnResult) {
									
									var $id = $(this).attr('id');
									if ($id == 'ownerName2') {
										$(this).data(
												"pageData",
												{
													VIN : $("#vin", container)
															.val(),
													OWNER_NO : $("#ownerNo2",
															container).val()
												});
									} else {
										$(this).data(
												"pageData",
												{
													VIN : $("#vin", container)
															.val(),
													OWNER_NO : $("#ownerNo",
															container).val()
												});//传递1个值
									}
									
									
									returnResult.status = true;
								});
						$("a[data-beforeRequest='true']",container).on("beforeRequest.dms",function(event,returnResult){
									var $id = $(this).attr('id');
									if($id == 'update'){
										if($("#ownerNo", container).val() == '' || $("#ownerNo", container).val() == null || $("#ownerNo2", container).val() == null || $("#ownerNo2", container).val() == ''){
											dmsCommon.tip({status:"warning",msg:"原车主与新车主存在空值,不能进行过户操作！"});
											returnResult.status = false;
											return ;
										}else if($("#ownerNo", container).val() == $("#ownerNo2", container).val()){
											dmsCommon.tip({status:"warning",msg:"原车主与新车主相同,不能进行过户操作！"});
											returnResult.status = false;
											return ;
										}
									}
									returnResult.status = true;
								});
					});
</script>
