<div class="dms-search">
	<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">选择客户</div>
			<div class="modal-close">
				<a data-dismiss="modal" class="btn btn-lg"> <i
					class="fa fa-remove"></i></a>
			</div>
		</div>
		<div class="modal-body">
			<div class="panel panel-default">
				<div class="panel-body">
				<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
								<label class="control-label col-xs-4">客户编号</label>
								<div class="col-xs-8">
									<input id="customerNo" name="customerNo" data-fieldName="CUSTOMER_NO" class="form-control"
										type="text" maxlength="120" />
								</div>
							</div>
						</div>
				<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
								<label class="control-label col-xs-4">客户名称</label>
								<div class="col-xs-8">
									<input id="customerName" name="customerName" data-fieldName="CUSTOMER_NAME" class="form-control"
										type="text" maxlength="120" />
								</div>
							</div>
						</div>
				<div class="col-xs-12 col-sm-6 col-md-4">
										<div class="form-group">
											<label class="control-label col-xs-4">客户类型</label>
											<div class="col-xs-8">
												<select id="customerType" name="customerType" data-fieldName='CUSTOMER_TYPE'
													class="bs-select form-control" data-dictCode="1018"
													data-value=""  >
												</select>
											</div>
										</div>
									</div>
				<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
								<label class="control-label col-xs-4">联系电话</label>
								<div class="col-xs-8">
									<input id="contactorPhone" name="contactorPhone" data-fieldName="CONTACTOR_PHONE" class="form-control"
										type="text" maxlength="120" />
								</div>
							</div>
						</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
										<div class="form-group">
											<label class="control-label col-xs-4">意向级别</label>
											<div class="col-xs-8">
												<select id="intentLevel" name="intentLevel" data-fieldName='INTENT_LEVEL'
													class="bs-select form-control" data-dictCode="1310"
													  >
												</select>
											</div>
										</div>
									</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
								<label class="control-label col-xs-4">联系手机</label>
								<div class="col-xs-8">
									<input id="contactorMobile" name="contactorMobile" data-fieldName="CONTACTOR_MOBILE" class="form-control"
										type="text" maxlength="120" />
								</div>
							</div>
						</div>
					<div class="col-xs-12 col-sm-6 col-md-4">
										<div class="form-group">
											<label class="control-label col-xs-4">主要车型</label>
											<div class="col-xs-8">
												<select id="isMainModel" name="isMainModel" data-fieldName='IS_MAIN_MODEL'
													class="bs-select form-control" data-dictCode="1278"
													  >
												</select>
											</div>
										</div>
									</div>
									
									
									
				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn blue"> <i
								class="fa fa-search"></i> 查询
							</a> <a href="javascript:;" class="btn blue"><i
								class="fa fa-undo"></i> 重置</a>
						</div>
					</div>
				</div>
			</div>
			<div class="panel panel-default table-panel">
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="dms_table"></table>
				</div>
			</div>
		</div>
		<div class="modal-footer center-block">
			<a class="btn blue" data-onclickEvent="true"><i
				class="fa fa-save"></i>确定</a> <a data-dismiss="modal" class="btn blue">
				<i class="fa fa-undo"></i>取消
			</a>
		</div>
	</form>
</div>
<script type="text/javascript">
	$(document).one("onload.dms",function(event,container){
		new Datatable().initPagination({
			src : "dms_table",
			container:container,
			url : dmsCommon.getDmsPath()["customer"] + "/BigCustomer/manage/bigcustomer",
			rowID : "CUSTOMER_NO",
			sortName : "CUSTOMER_NO",
			sortOrder : "desc",
			autoHeight:false,
			undefinedText : "",
		
			columns : [ 
			{radio:true,sortable : false},      
			{field : "CUSTOMER_NO",title : "客户编号"}, 
			{field : "CUSTOMER_NAME",title : "客户姓名"}, 
			{field : "CUSTOMER_TYPE",title : "客户类型",codeFormat : {type:"dict",codeType:"1018"}},
			{field : "IS_BIG_CUSTOMER",title : "是否大客户",codeFormat : {type:"dict",codeType:"1278"}},
			{field : "CONTACTOR_PHONE",title : "联系人电话"}, 
			{field : "CONTACTOR_MOBILE",title : "联系人手机"}, 
			{field : "INTENT_LEVEL",title : "意向级别",codeFormat : {type:"dict",codeType:"1310"}},
			{field : "CUS_SOURCE",title : "客户来源",codeFormat : {type:"dict",codeType:"1311"}},
			{field : "CT_CODE",title : "证件类型",codeFormat : {type:"dict",codeType:"1239"}},
			{field : "CERTIFICATE_NO",title : "证件号码"},
			{field : "INTENT_BRAND",title : "意向品牌"},
			{field : "INTENT_SERIES",title : "意向车系"},
			{field : "INTENT_MODEL",title : "意向车型"},
			{field : "INTENT_CONFIG",title : "意向配置"},
			{field : "INTENT_COLOR",title : "意向颜色"},
			{field : "MEDIA_TYPE",title : "信息渠道" ,codeFormat : {type:"dict",codeType:"1298"}},
			{field : "MEDIA_DETAIL",title : "渠道细分",codeFormat : {type:"dict",codeType:"1239"}}, 
			{field : "ESC_ORDER_STATUS",title : "官方订单状态",codeFormat : {type:"dict",codeType:"7016"}}, 
			{field : "ESC_TYPE",title : "官网客户类型",codeFormat : {type:"dict",codeType:"1618"}},
			{field : "COMPANY_NAME",title : "公司名称",visible:false}
			
    			]
		});
		
		//事件点击
		$("a[data-onclickEvent='true']",container).on("dms.click",function(event){
			var selectRow = $("#dms_table",container).dmsTable().getFirstSelection();
			if (selectRow.IS_BIG_CUSTOMER=='12781002' || selectRow.IS_BIG_CUSTOMER==''){
				dmsCommon.tip({status:"warning",msg:"必须选择大客户"});//总共的状态类型：info、success、error、warning
				return false;
			}
			if (isStringNull(selectRow.COMPANY_NAME)){
				dmsCommon.tip({status:"warning",msg:"请大客户经理先维护该大客户的公司名称"});//总共的状态类型：info、success、error、warning
				return false;
			}
			$("div[data-customerSelect='true']",getElementContext()).initHtmlContent(selectRow);		
			//关闭窗口		
			
			$("a[data-dismiss='modal']",container).click();
		});
	});
</script>  