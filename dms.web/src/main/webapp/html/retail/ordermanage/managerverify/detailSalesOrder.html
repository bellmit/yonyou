<div class="dms-edit ajaxrest" data-url="/ordermanage/salesOrders/{[SO_NO]}" data-model="retail" data-pageInitCallBack="true">
	<form class="form-horizontal">
		<div class="panel panel-default" >
		
		                   <div class="panel-heading">
								<div class="pannel-name">订单信息</div>
								<div class="pannel-tools">
									<a href="javascript:;" class="expand"> <i
										class="fa fa-chevron-down"></i></a>
								</div>
							</div>
			<div class="panel-body">
				<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">销售单号</label>
							<div class="col-xs-8">
								<input id="soNo" name="soNo" disabled
									data-fieldName="SO_NO" class="form-control" type="text" />
									
							</div>
						</div>
					</div>
						<div class="col-xs-12 col-sm-6 col-md-4" hidden="hidden">
							<div class="form-group">
								<label class="control-label col-xs-4">订单类型</label>
								<div class="col-xs-8">
									<select id="businessType" name="businessType" disabled
										data-fieldName="BUSINESS_TYPE" class="bs-select form-control"
										data-dictCode="1300" data-value="13001001"></select>
								</div>
							</div>
						</div>
						<!--/span-->
					<div  data-tableCustomerSelect="true" data-tableWsNoSelect="true">
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">大客户报备</label>
							<div class="col-xs-8 ">
								
								<input id="wsNo" name="wsNo" disabled
									data-fieldName="WS_NO" class="form-control" type="text"/>
									 
									
							
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">开单日期</label>
							<div class="col-xs-8">
								
									<input id="sheetCreateDate" name="sheetCreateDate" readonly
										class="form-control" type="text" />
										
								
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group form-group-xs m-b-xs">
							<label class="control-label col-xs-4">开单人</label>
							<div class="col-xs-8">
								<select id="sheetCreatedBy" name="sheetCreatedBy" disabled
									data-fieldName="SHEET_CREATED_BY" class="bs-select form-control"
									data-url="/basedata/employees/-1/salesConsultant" data-value="{[userInfo.userId]}"
									data-model="manage" data-labelValue="USER_ID"
									data-lableDesc="USER_NAME">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">※客户编号</label>
							<div class="col-xs-8 ">
								
								<input id="customerNo" name="customerNo" disabled
									data-fieldName="CUSTOMER_NO" class="form-control" type="text"
									 />
								

							</div>
						</div>
					</div>
				
					<div class="col-xs-12 col-sm-6 col-md-4" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">意向单号</label>
							<div class="col-xs-8 ">
								
								<input id="intentSoNo" name="intentSoNo" disabled
									data-fieldName="INTENT_SO_NO" class="form-control" type="text" />
							</div>
						</div>
					</div>
                    	<div class="col-xs-12 col-sm-6 ">
						<div class="form-group">
							<label class="control-label col-xs-2">客户名称</label>
							<div class="col-xs-10">
								<input id="customerName" name="customerName"
									data-fieldName="CUSTOMER_NAME" class="form-control" type="text"
									disabled="disabled" />
							</div>
						</div>
					</div>
				<!-- 	<div class="col-xs-12 col-sm-6 col-md-4">
						<div class="form-group">
							<label class="control-label col-xs-4">客户名称</label>
							<div class="col-xs-8">
								<input id="customerName" name="customerName"
									data-fieldName="CUSTOMER_NAME" class="form-control" type="text"
									disabled="disabled" />
							</div>
						</div>
					</div> -->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4">客户类型</label>
								<div class="col-xs-8">
									<select id="customerType" name="customerType" disabled
										data-fieldName="CUSTOMER_TYPE" class="bs-select form-control"
										data-dictCode="1018" data-value=""></select>
								</div>
							</div>
						</div>
						<!--/span-->
							<div class="col-xs-12 col-sm-6 col-md-4" hidden="hidden">
							<div class="form-group">
								<label class="control-label col-xs-4">客户来源</label>
								<div class="col-xs-8">
									<select id="cusSource" name="cusSource" disabled
										data-fieldName="CUS_SOURCE" class="form-control"
										data-dictCode="1311" data-value=""></select>
								</div>
							</div>
						</div>
						<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">联系人</label>
							<div class="col-xs-8">
								<input id="contactorName" name="contactorName" class="form-control" 
									type="text" disabled="disabled" data-fieldName="CONTACTOR_NAME" readonly="readonly"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">联系手机</label>
							<div class="col-xs-8">
								<input id="mobile" name="mobile" class="form-control"
									type="text" disabled="disabled" data-fieldName="MOBILE" />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-12 col-md-6">
						<div class="form-group">
							<label class="control-label col-xs-4 col-sm-2">地址</label>
							<div class="col-xs-8 col-sm-10">
								<input id="address" name="address" class="form-control"
									type="text" disabled="disabled" data-fieldName="ADDRESS" />
							</div>
						</div>
					</div>
						<!--/span-->
								<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group form-group-xs m-b-xs">
							<label class="control-label col-xs-4">※销售顾问</label>
							<div class="col-xs-8">
								<select id="soldBy" name="soldBy"
									class="form-control required"
									data-url="/basedata/employees/-1/salesConsultant"
									data-model="manage" data-labelValue="USER_ID"
									data-lableDesc="USER_NAME" data-fieldName="SOLD_BY">
								</select>
							</div>
						</div>
					</div>
						<!--/span-->
						<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4">证件类型</label>
								<div class="col-xs-8">
									<select id="ctCode" name="ctCode" data-fieldName="CT_CODE"
										class="bs-select form-control" data-dictCode="1239" disabled
										data-value="">
									</select>
								</div>
							</div>
						</div>
						<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4  col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4 ">证件号</label>
								<div class="col-xs-8 ">
									<input id="certificateNo" name="certificateNo" data-fieldName="CERTIFICATE_NO"
										class="form-control" type="text"  disabled/>
								</div>
							</div>
						</div>
						<!--/span-->
             
			</div>
					

					 <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">订单状态</label>
							<div class="col-xs-8">
								<select class="form-control" id="soStatus" disabled
									name="soStatus" data-dictCode="1301" data-fieldName="SO_STATUS">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">※开票方式</label>
							<div class="col-xs-8">
								<select class="form-control required" id="invoiceMode" 
									name="invoiceMode" data-dictCode="1303" data-fieldName="INVOICE_MODE"  >
								</select>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">合约编号</label>
							<div class="col-xs-8">
								<input id="contractNo" name="contractNo" class="form-control"
									type="text" maxlength="30" data-fieldName="CONTRACT_NO" />
							</div>
						</div>
					</div>

			
		        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">签约日期</label>
							<div class="col-xs-8">
								<div class="input-group date date-picker">
									<input id="contractDate" name="contractDate" data-fieldName="CONTRACT_DATE" readonly
										class="form-control" type="text" /> 
								</div>
							</div>
						</div>
					</div>

			
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">合约定金</label>
							<div class="col-xs-8">
								<input id="contractEarnest" name="contractEarnest"
									class="form-control decimal" type="text" maxDigit="12" maxPrecision="2" data-fieldName="CONTRACT_EARNEST"/>
							</div>
						</div>
					</div>
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">合约到期日期</label>
							<div class="col-xs-8">
								<div class="input-group date date-picker">
									<input id="contractMaturity" name="contractMaturity" readonly
										class="form-control required" type="text" data-fieldName="CONTRACT_MATURITY"/> 
								</div>
							</div>
						</div>
					</div>

			
			

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">交车方式</label>
							<div class="col-xs-8">
								<select class="form-control" id="deliveryMode"
									name="deliveryMode" data-dictCode="1302" data-fieldName="DELIVERY_MODE" data-excludeItems="13021002" data-value="13021001">
								</select>
							</div>
						</div>
					</div>
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">官网交车方式</label>
							<div class="col-xs-8">
								<select class="form-control" id="deliveryModeElec"
									name="deliveryModeElec" data-dictCode="1600" data-fieldName="DELIVERY_MODE_ELEC" >
								</select>
								<input type="hidden" class="form-control" id="escOrderStatus" name="escOrderStatus"
										data-fieldName="ESC_ORDER_STATUS" />
								<input type="hidden" class="form-control" id="escType" name="escType"
										data-fieldName="ESC_TYPE" />
								<input type="hidden" class="form-control" id="ecOrderNo" name="ecOrderNo"
										data-fieldName="EC_ORDER_NO" />
							</div>
						</div>
					</div>
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">预交车时间</label>
							<div class="col-xs-8">
								<div class="input-group date date-picker">
									<input id="deliveringDate" name="deliveringDate" readonly
										class="form-control" type="text" data-fieldName="DELIVERING_DATE"/> <span
										class="input-group-btn">
										<button class="btn default date-set" type="button">
											<i class="fa fa-calendar"></i>
										</button>
										<button class="btn default date-reset" type="button">
											<i class="fa fa-times"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
					
				
			
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
										<div class="form-group">
											<label class="control-label col-xs-4">省份</label>
											<div class="col-xs-8">
												<select id="province" class="bs-select form-control"
													name="province" 
													data-type="region">
												</select>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
										<div class="form-group">
											<label class="control-label col-xs-4">城市</label>
											<div class="col-xs-8">
												<select parent="province" class="bs-select form-control" 
												name="city" id="city" >
												</select>
											</div>
										</div>
									</div>
									<!--/span-->
									<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
										<div class="form-group">
											<label class="control-label col-xs-4">区县</label>
											<div class="col-xs-8">
												<select parent="city" id="district"
													class="bs-select form-control" name="district" >
													</select>
											</div>
										</div>
									</div>
									<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">支付方式</label>
							<div class="col-xs-8">
								<select class="form-control" id="payMode"
									name="payMode" data-dictCode="1025" data-fieldName="PAY_MODE" data-excludeItems="10251002" data-value="10251001">
								</select>
							</div>
						</div>
					</div>
						<div class="col-xs-12 col-sm-12">
						<div class="form-group">
							<label class="control-label col-xs-4 col-sm-1">备注</label>
							<div class="col-xs-8 col-sm-11">
							<textarea id="remark" name="remark"
									   class="form-control" maxlength="120" data-fieldName="REMARK"
										rows="2" cols=""></textarea>
								<!-- <input id="remark" name="remark" class="form-control"
									type="text" disabled="disabled" data-fieldName="REMARK" /> -->
							</div>
						</div>
					</div>
						<!--/span-->
				</div>
			</div>
		</div>
		<div class="panel panel-default" >
		
		                   <div class="panel-heading">
								<div class="pannel-name">车辆信息</div>

								<div class="pannel-tools">
									<a href="javascript:;" class="expand"> <i
										class="fa fa-chevron-down"></i></a>
								</div>
							</div>
			<div class="panel-body">
				<div class="row">


					
					<div data-tableVINSelect="true" data-tableProductSelect="true">
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
					      <div class="form-group">
								<label class="control-label col-xs-4">※产品代码</label>
								<div class="col-xs-8">
									
										<input type="hidden" name='seNo' value='{[SE_NO]}' /> 
										<input id="productCode" readonly name="productCode"
											class="form-control required" type="text" data-fieldName="PRODUCT_CODE"/> 
									
									
								</div>
							</div>
						<!-- <div class="form-group">
							<label class="control-label col-xs-4">产品代码</label>
							<div class="col-xs-8 ">
								<div class="input-group">
									<input type="text" class="form-control"
										id="productCode" name="productCode"
										data-fieldName="PRODUCT_CODE" readonly /> <input
										type="hidden" class="form-control" id="productId"
										name="productId" data-fieldName="PRODUCT_ID" /> <span
										class="input-group-btn">
										<button class="btn default btn-sm" type="button"
											data-url="retail/ordermanage/salesorder/selectBrand.html"
											data-toggle="modal" data-width="modal-lg">
											<i class="fa fa-list-alt"></i>
										</button>
										<button class="btn default input-clear" type="button">
											<i class="fa fa-close"></i>
										</button>
									</span>
								</div>
							</div>
						</div> -->
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">产品名称</label>
							<div class="col-xs-8">
								<input id="productname" name="productname" data-fieldName="PRODUCT_NAME" 
									class="form-control" type="text" disabled="disabled" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">VIN号</label>
							<div class="col-xs-8 ">
								
									<input type="text" class="form-control" id="vin" name="vin"
										data-fieldName="VIN" readonly />
									<input type="hidden" class="form-control" id="vsStockId" name="vsStockId"
										data-fieldName="VS_STOCK_ID" />
									<input type="hidden" class="form-control" id="vehicleId" name="vehicleId"
										data-fieldName="VEHICLE_ID" />
								
							
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">品牌</label>
							<div class="col-xs-8">
								<select id="brand" class="bs-select form-control" name="brand"  disabled="disabled"
									data-url="/basedata/brandsdict" data-model="manage" data-fieldName="BRAND_CODE"
									data-labelValue="BRAND_CODE" data-lableDesc="BRAND_NAME"
									>
								</select>
							</div>
						</div>
					</div>
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">仓库</label>
							<div class="col-xs-8">
							        <select id="storageCode" name="storageCode" class="bs-select form-control" data-fieldName="STORAGE_CODE"
										data-url="/stockManage/safeguard/findStorage/{[dealer_code]}" data-model="vehicle"
										data-labelValue="STORAGE_CODE" data-lableDesc="STORAGE_NAME">
									</select>
							</div>
						</div>
					</div>	
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车辆用途</label>
							<div class="col-xs-8">
								<select class="form-control required" id="vehiclePurpose"
									name="vehiclePurpose" data-dictCode="1193" data-value="11931002">
								</select>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车系</label>
							<div class="col-xs-8">
								<select id="series" parent="brand"
									class="bs-select form-control" name="series"
									data-url="/basedata/brandsdictC/{[brand]}/seriessdictC"
									data-model="manage" data-labelValue="SERIES_CODE" data-fieldName="SERIES_CODE"
									data-lableDesc="SERIES_NAME" disabled="disabled">
								</select>
							</div>
						</div>
					</div>


					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车型</label>
							<div class="col-xs-8">
								<select id="model" parent="series"
									class="bs-select form-control" name="model"
									data-url="/basedata/brandsdictC/{[brand]}/seriessdictC/{[series]}/modelsdictC"
									data-model="manage" data-labelValue="MODEL_CODE" data-fieldName="MODEL_CODE"
									data-lableDesc="MODEL_NAME" disabled="disabled">
								</select>
							</div>
						</div>
					</div>
 <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">库位</label>
							<div class="col-xs-8">
							<input id="storagePositionCode" name="storagePositionCode" data-fieldName="STORAGE_POSITION_CODE" 
									class="form-control" type="text" disabled="disabled" />
							</div>
						</div>
					</div>
		           <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">配车日期</label>
							<div class="col-xs-8">
								<div class="input-group date date-picker">
									<input id="dispatchedDate" name="dispatchedDate" readonly
										class="form-control" type="text" data-fieldName="DISPATCHED_DATE"/> <span
										class="input-group-btn">
										<button class="btn default date-set" type="button">
											<i class="fa fa-calendar"></i>
										</button>
										<button class="btn default date-reset" type="button">
											<i class="fa fa-times"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
						     <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">配车人员</label>
							<div class="col-xs-8">
							<input id="dispatchedBy" name="dispatchedBy" data-fieldName="DISPATCHED_BY" 
									class="form-control" type="text" disabled="disabled" />
							</div>
						</div>
					</div>
							<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">销售指导价</label>
							<div class="col-xs-8">
								<input id="directivePrice" name="directivePrice" value="0"
									class="form-control" type="text" disabled="disabled" data-autoValueDigits="2"
									data-fieldName="DIRECTIVE_PRICE"  />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">配置</label>
							<div class="col-xs-8">
								<select id="config" parent="model" class="bs-select form-control" name="config"
									data-url="/basedata/brandsdictC/{[brand]}/seriessdictC/{[series]}/modelsdictC/{[model]}/packagesdictC"
									data-model="manage" data-labelValue="CONFIG_CODE" disabled="disabled"
									data-lableDesc="CONFIG_NAME"  data-fieldName="CONFIG_CODE">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group form-group-xs m-b-xs">
							<label class="control-label col-xs-4">颜色</label>
							<div class="col-xs-8">
								<select id="color"  disabled="disabled"
									class="bs-select form-control" name="color" data-fieldName="COLOR_CODE"
									data-url="/basedata/colors/colorinfo/dicts" data-model="repair"
									data-labelValue="COLOR_CODE" data-lableDesc="COLOR_NAME">
								</select>
							</div>
						</div>
					</div>

				<!-- 
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车辆用途</label>
							<div class="col-xs-8">
								<select class="form-control required" id="vehiclePurpose"
									name="vehiclePurpose" data-dictCode="1193" data-value="11931002">
								</select>
							</div>
						</div>
					</div>
					/span -->

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">发动机号</label>
							<div class="col-xs-8">
								<input id="engineNo" name="engineNo" class="form-control"
									type="text" disabled="disabled" data-fieldName="ENGINE_NO" />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">合格证号</label>
							<div class="col-xs-8">
								<input id="certificateNumber" name="certificateNumber"
									class="form-control" type="text" disabled="disabled" data-fieldName="CERTIFICATE_NUMBER" />
							</div>
						</div>
					</div>
					</div>
					<div data-tableAllLoanRateSelect="true">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">付款银行</label>
							<div class="col-xs-8">
								<select class="form-control" id="loanOrg"
									name="loanOrg" data-url="/basedata/BasicParameters/paying/bank" data-model="manage"
									data-labelValue="BANK_CODE" data-lableDesc="BANK_NAME"
								    data-fieldName="LOAN_ORG">
								</select>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">分期期数</label>
							<div class="col-xs-8">
								<select class="form-control" id="installmentNumber"
									name="installmentNumber" data-dictCode="3387" data-fieldName="INSTALLMENT_NUMBER">
								</select>
							</div>
						</div>
					</div>
					<!--/span-->
				
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">贷款总金额</label>
							<div class="col-xs-8">
								<input id="installmentAmount" name="installmentAmount" class="form-control"
									type="text" disabled="disabled" data-fieldName="INSTALLMENT_AMOUNT" />
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">首付比例(%)</label>
							<div class="col-xs-5">
								<input id="firstPermentRatio" name="firstPermentRatio" class="form-control"
									type="text" disabled="disabled" data-fieldName="FIRST_PERMENT_RATIO" />
							</div>
							<div class="col-xs-3">
								<!-- <a data-goback="page" href="retail/ordermanage/salesorder/addSalesOrder.html"
						    class="btn blue"><i class="fa fa-plus-square"></i> 金融方案</a> -->
					   <a class="btn blue"  data-beforeShowEvent="true"
						data-url="retail/ordermanage/salesorder/selectAllLoanRate.html"  disabled
						data-toggle="modal" data-width="modal-lg" id="allLoanRate"> <i class="fa fa-plus-square"></i>
						金融方案
					</a> 
					<!-- <button class="btn blue" type="button" 
												data-url="retail/ordermanage/salesorder/selectAllLoanRate.html"
												data-toggle="modal" data-width="modal-lg" data-beforeShowEvent="true">
												<i class="fa fa-plus-square">金融方案</i>
			        </button> -->
							</div>
							
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">首付范围(%)</label>
							<div class="col-xs-4">
								<input id="firstPermentRangeS" name="firstPermentRangeS" class="form-control"
									type="text" disabled="disabled" data-fieldName="FIRST_PERMENT_RANGE_S" />
							</div>
							<label class="control-label col-xs-1">至</label>
							<div class="col-xs-3">
								<input id="firstPermentRangeE" name="firstPermentRangeE" class="form-control"
									type="text" disabled="disabled" data-fieldName="FIRST_PERMENT_RANGE_E" />
							</div>
							
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">贴息率(%)</label>
							<div class="col-xs-8">
								<input id="loanRate" name="loanRate" class="form-control"
									type="text" disabled="disabled" data-fieldName="LOAN_RATE" />
							</div>
						</div>
					</div>
					<!--/span-->
					</div>
					
				</div>
			</div>
		</div>
		<div class="panel panel-default" >
		
		                   <div class="panel-heading">
								<div class="pannel-name">二手车车辆信息</div>

								<div class="pannel-tools">
									<a href="javascript:;" class="expand"> <i
										class="fa fa-chevron-down"></i></a>
								</div>
							</div>
			<div class="panel-body">
				<div class="row">

	<!--/span-->
	<div  data-tableOldVINSelect="true">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">是否置换</label>
							<div class="col-xs-8">
								<select class="form-control" id="isPermuted"
									name="isPermuted" data-dictCode="1278">
								</select>
							</div>
						</div>
					</div>
			
							<!--/span-->
					<div data-tableSelect2="true">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">二手车VIN</label>
							<div class="col-xs-8 ">
								
									<input type="text" class="form-control" id="permutedVin" name="permutedVin"
										data-fieldName="PERMUTED_VIN" disabled="disabled" />
									<input type="hidden" class="form-control" id="vsStockId" name="vsStockId"
										data-fieldName="VS_STOCK_ID" />
									<input type="hidden" class="form-control" id="vehicleId" name="vehicleId"
										data-fieldName="VEHICLE_ID" />
									
								
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">品牌</label>
							<div class="col-xs-8">
								<select id="oldBrandCode" class="bs-select form-control" name="oldBrandCode"
									data-url="/basedata/brandsdict" data-model="manage"
									data-labelValue="BRAND_CODE" data-lableDesc="BRAND_NAME"
									 data-fieldName="OLD_BRAND_CODE" disabled="disabled">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车系</label>
							<div class="col-xs-8">
								<select id="oldSeriesCode" parent="oldBrandCode"
									class="bs-select form-control" name="oldSeriesCode"
									data-url="/basedata/brandsdictC/{[oldBrandCode}/seriessdictC"
									data-model="manage" data-labelValue="SERIES_CODE" data-fieldName="OLD_SERIES_CODE"
									data-lableDesc="SERIES_NAME" disabled="disabled">
								</select>
							</div>
						</div>
					</div>


					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车型</label>
							<div class="col-xs-8">
								<select id="oldModelCode" parent="oldSeriesCode"
									class="bs-select form-control" name="oldModelCode"
									data-url="/basedata/brandsdictC/{[oldBrandCode]}/seriessdictC/{[oldSeriesCode]}/modelsdictC"
									data-model="manage" data-labelValue="MODEL_CODE" data-fieldName="OLD_MODEL_CODE"
									data-lableDesc="MODEL_NAME" disabled="disabled">
								</select>
							</div>
						</div>
					</div>

                     <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车牌号</label>
							<div class="col-xs-8">
								<input id="assessedLicense" name="assessedLicense" class="form-control"
									type="text" disabled="disabled" data-fieldName="ASSESSED_LICENSE" />
							</div>
						</div>
					</div>
					
				  <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">评估金额</label>
							<div class="col-xs-8">
								<input id="assessedPrice" name="assessedPrice" data-fieldName="ASSESSED_PRICE" 
									class="form-control" type="text" disabled="disabled" />
							</div>
						</div>
					</div>
			

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">收购金额</label>
							<div class="col-xs-8">
								<input id="oldCarPurchase" name="oldCarPurchase" data-fieldName="OLD_CAR_PURCHASE" 
									class="form-control" type="text" disabled="disabled" />
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">二手车描述</label>
							<div class="col-xs-8">
								<input id="permutedDesc" name="permutedDesc" class="form-control"
									type="text" disabled="disabled" data-fieldName="PERMUTED_DESC" />
							</div>
						</div>
					</div>
					<div class="col-xs-12 ">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
							<div class="form-group">
								<label class="control-label col-xs-4">收购协议</label>
								<div class="col-xs-8">
								   <input id="address" name="address" class="form-control"  type="text" />
													
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
							
								<div class="col-xs-12">
								   <input id="address" name="address" class="form-control"  type="text" />
													
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-6 col-md-4">
							<div class="form-group">
							
								<div class="col-xs-12">
									<a class="btn blue disabled" ><i class="fa fa-minus-square"></i>点击扫描收购协议</a> 
								</div>
							</div>
						</div>
						</div>
                      </div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default table-panel" hidden="hidden">
			<div class="panel-body">
				<div class="tabbable-custom">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#tab_decorationProject" data-toggle="tab">装潢项目</a></li>
						<li><a href="#tab_decorationMaterials" data-toggle="tab">精品材料</a></li>
						<li><a href="#tab_serviceProject" data-toggle="tab">服务项目</a></li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane fade in active" id="tab_decorationProject">
							<div class="panel panel-default table-panel">
								<div class="panel-heading">
									<div class="pannel-button">
										<div class="btn-group btn-group-sm">
											<a class="btn btn-outline"
												data-url="retail/ordermanage/salesorder/selectDecoration.html"
												data-toggle="modal" data-width="modal-lg"><i
												class="fa fa-plus-square"></i>添加 </a>
										</div>
									</div>
								</div>
							</div>

							<div class="panel panel-default table-panel">
								<div class="panel-body">
									<table
										class="table table-striped table-bordered table-hover table-responsive"
										id="soDecrodateList">
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="tab_decorationMaterials">
							<div class="panel panel-default table-panel">
								<div class="panel-heading">
									<div class="pannel-button">
										<div class="btn-group btn-group-sm">
											<a class="btn btn-outline"
												data-url="customer/potentialcus/customerInfo/addCusInfo.html"
												data-toggle="modal" data-width="modal-lg"><i
												class="fa fa-plus-square"></i>添加 </a>
										</div>
									</div>
								</div>
							</div>
							<div class="panel panel-default table-panel">
								<div class="panel-body">
									<table
										class="table table-striped table-bordered table-hover table-responsive"
										id="soDecrodatePartList">
									</table>
								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="tab_serviceProject">
							<div class="panel panel-default table-panel">
								<div class="panel-heading">
									<div class="pannel-button">
										<div class="btn-group btn-group-sm">
											<a class="btn btn-outline"
												data-url="retail/ordermanage/salesorder/selectServiceProject.html"
												data-toggle="modal" data-width="modal-lg"><i
												class="fa fa-plus-square"></i>添加 </a>
												
										</div>
									</div>
								</div>
							</div>
							<div class="panel panel-default table-panel">
								<div class="panel-body">
									<table
										class="table table-striped table-bordered table-hover table-responsive"
										id="soServicesList">
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel panel-default" >
		  <div class="panel-heading">
								<div class="pannel-name">财务信息</div>

								<div class="pannel-tools">
									<a href="javascript:;" class="expand"> <i
										class="fa fa-chevron-down"></i></a>
								</div>
							</div>
			<div class="panel-body" >
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" data-tableVINSelect="true" data-tableProductSelect="true">
						<div class="form-group">
							<label class="control-label col-xs-4">车辆价格</label>
							<div class="col-xs-8">
								<input id="vehiclePrice" name="vehiclePrice" maxDigit="12" maxPrecision="2" data-autoValueDigits="2"
									class="form-control decimal" type="text" value="0"  data-fieldName="VEHICLE_PRICE"/>
							<div class="hidden">
								<a data-onclickEvent1="true"></a>
							</div>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">装潢金额</label>
							<div class="col-xs-8">
								<input id="upholsterSum" name="upholsterSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="UPHOLSTER_SUM"/>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">赠送金额</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">服务项目金额</label>
							<div class="col-xs-8">
								<input id="serviceSum" name="serviceSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="SERVICE_SUM"/>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">抵扣金额</label>
							<div class="col-xs-8">
								<input id="offsetAmount" name="offsetAmount" class="form-control decimal"  maxDigit="12" maxPrecision="2" value="0"
									type="text" data-fieldName="OFFSET_AMOUNT" data-autoValueDigits="2" />
							</div>
						</div>
					</div>
                   <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">其他金额对象</label>
							<div class="col-xs-8">
								<input id="otherAmountObject" name="otherAmountObject" class="form-control" 
									type="text"  data-fieldName="OTHER_AMOUNT_OBJECT"/>
							</div>
						</div>
					</div>
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">其他金额</label>
							<div class="col-xs-8">
								<input id="otherAmount" name="otherAmount" class="form-control" value="0" data-autoValueDigits="2"
									type="text"  data-fieldName="OTHER_AMOUNT"/>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">订单总额</label>
							<div class="col-xs-8">
								<input id="orderSum" name="orderSum" class="form-control" value="0"
									type="text" disabled="disabled" data-fieldName="ORDER_SUM"  data-autoValueDigits="2"
									data-autoValue="#vehiclePrice + #upholsterSum + #serviceSum "
									/>
							</div>
						</div>
					</div>

					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">订单应收</label>
							<div class="col-xs-8">
								<input id="orderReceivableSum" name="orderReceivableSum" value="0"
									class="form-control" type="text" disabled="disabled" data-autoValueDigits="2"
									data-autoValue="#vehiclePrice + #upholsterSum + #serviceSum - #offsetAmount"
									data-fieldName="ORDER_RECEIVABLE_SUM"  />
							</div>
						</div>
					</div>
					
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">保险金额</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">牌照金额</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">税收金额</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">代表预收</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" hidden="hidden">
						<div class="form-group">
							<label class="control-label col-xs-4">代办应收</label>
							<div class="col-xs-8">
								<input id="presentSum" name="presentSum" class="form-control" value="0" data-autoValueDigits="2"
									type="text" disabled="disabled" data-fieldName="PRESENT_SUM"/>
							</div>
						</div>
					</div>
					<!--/span-->
					
				</div>
			</div>
		</div>
		<div class="form-actions">
		    <!-- <a data-goback="page"
						data-url="customer/potentialcus/customerInfo/editCusInfo.html"
						data-toggle="modal" data-width="modal-lg" data-beforeShowEvent="true"
						class="btn blue" ><i class="fa fa-plus-square"></i>
						客户信</a> -->
			   <a class="btn blue"   data-beforeShowEvent="true" id="customerInfo"
						data-url="customer/potentialcus/customerInfo/editCusInfo.html" disabled
						data-toggle="modal" data-width="modal-lg"> <i class="fa fa-plus-square"></i>
						客户信息
					</a> 			
						
			  <!-- data-method="POST" data-model="retail" -->
			<a data-url="/ordermanage/salesOrders" data-model="retail" id="saveBtn"
				data-method="POST" data-callBack="true"  data-onclickEvent1="true" class="btn blue" data-beforeRequest="true" 
				data-toggle="confirmation"><i class="fa fa-save"></i>保存 </a>
			<!-- <div class="hidden">
				<a href="retail/ordermanage/salesorder/editSalesOrder.html"
					class="btn btn-outline ajaxify" data-onclickEvent="true"> <i
					class="fa fa-plus-square"></i> 保存成功后
				</a>
			</div> -->
			<a data-url="/ordermanage/salesOrders" data-model="retail"
				data-method="POST" data-callBack="true" class="btn blue"
				data-toggle="confirmation"><i class="fa fa-save"></i>合约书打印 </a>
				<a data-url="/ordermanage/salesOrders" data-model="retail"
				data-method="POST" data-callBack="true" class="btn blue"
				data-toggle="confirmation"><i class="fa fa-save"></i>缴费通知打印 </a>
				<a data-url="/ordermanage/salesOrders" data-model="retail"
				data-method="POST" data-callBack="true" class="btn blue"
				data-toggle="confirmation"><i class="fa fa-save"></i>打印 </a>
				<a data-url="/ordermanage/salesOrders" data-model="retail"
				data-method="POST" data-callBack="true" class="btn blue"
				data-toggle="confirmation"><i class="fa fa-save"></i>签批单打印 </a>
				
				<!-- <a  data-errorCallBack="true" data-info="saveBefore" data-url="/basedata/employees/employeSaveBefore/{[EMPLOYEE_NO]}" data-callBack="true"   class="btn blue" data-toggle="confirmation" data-model="manage" data-method="GET" ><i class="fa fa-save"></i> 提交审核
			</a>
		<a  data-info="saveBeforeUrl"  data-url="/basedata/employees/{[EMPLOYEE_ID]}" data-model="manage" data-method="PUT"
				 data-saveBeforeEvent="true" class="btn blue ajaxrest hidden" ><i class="fa fa-save"></i> 提交审核</a>  -->
			 <a data-url="/ordermanage/salesorders/submit/checkVerified"
											data-model="manage" data-method="PUT" id="auditBtn" disabled data-beforeRequest="true" data-callBack="true"  data-validate="true"  class="btn blue" 
											 data-toggle=confirmation><i class="fa fa-save"></i> 提交审核</a> 
			<a data-goback="page"
						data-url="retail/ordermanage/salesorder/commitAudit.html" 
						data-toggle="modal" data-width="modal-lg" id="auditBtn1"  data-onclickEvent="true"
						class="btn blue ajaxrest hidden" ><i class="fa fa-plus-square"></i>
						审核</a>								 
      <!--  <a  data-errorCallBack="true" id="btn1" data-info="saveBefore"  data-callBack="true"   class="btn blue" data-toggle="confirmation" data-model="customer" data-method="GET" ><i class="fa fa-save"></i> 确认
			</a>
			<a  data-info="saveBeforeUrl" data-saveBeforeEvent="true" data-onclickEvent="true" class="btn blue ajaxrest hidden" ><i
				class="fa fa-save"></i>确定</a>	 -->										 
			<!-- <a class="btn  blue" disabled="disabled"><i class="fa fa-check-square-o"></i>提交审核</a> -->
			<a data-goback="page"
						data-url="retail/ordermanage/salesorder/searchAuditDetail.html" 
						data-toggle="modal" data-width="modal-lg"
						class="btn blue" ><i class="fa fa-plus-square"></i>
						审核记录</a>
			
			<a data-goback="page" href="retail/ordermanage/managerverify/searchManagerVerify.html"
				class="btn blue ajaxify"><i class="fa fa-reply"></i>返回</a>
		</div>
	</form>
</div>
<script type="text/javascript">
	$(document) .one( "onload.dms", function(event, container) {
	    var checkPotentCustomer=false;
	    var checkSaveEcOrder=0;
	    var checkPotentCustomer=false;
	    var vv=0;
		 //金额计算
		 var calcTotalAmount = function(){
			 dmsRetail.moneyCalculate(container);
		 };
		//计算订单总额
		 $("input[name='vehiclePrice']",container).bindChange(function(obj){
			 	$("#vehiclePrice",container).bindAutoValueEvent("");//车辆价格 
				$("#upholsterSum",container).bindAutoValueEvent("");//装潢金额
				$("#serviceSum",container).bindAutoValueEvent("");//服务项目金额
				$("#offsetAmount",container).bindAutoValueEvent("");//抵扣金额
				$("#orderSum",container).bindAutoValueEvent("");//订单总额= 车辆价格+装潢金额+服务项目金额
				$("#orderReceivableSum",container).bindAutoValueEvent("");//订单应收 = 车辆价格+装潢金额+服务项目金额-抵扣金额
				$("#orderSum",container).bindAutoValueEvent("#vehiclePrice + #upholsterSum + #serviceSum");	
				$("#orderReceivableSum",container).bindAutoValueEvent("#vehiclePrice + #upholsterSum + #serviceSum - #offsetAmount");
		});	
		$("#cusSource",container).bindChange(function(obj){
			 var cusSource=$("#cusSource",container).val();
			 if(cusSource=="13111020"){
				  $("#isPermuted",container).val("12781001"); 
				  $("#permutedVin",container).removeAttr("disabled");
				  $("#permutedVin",container).addClass("required");
				  $("#oldCarPurchase",container).removeAttr("disabled");
				  $("#oldCarPurchase",container).addClass("required");
				  $("#permutedDesc",container).removeAttr("disabled");
			 }else{
				 $("#oldCarPurchase",container).attr("disabled","disabled");
				 $("#oldCarPurchase",container).removeClass("required");
				 $("#permutedVin",container).attr("disabled","disabled");
				 $("#permutedVin",container).removeClass("required");
				 $("#permutedDesc",container).attr("disabled","disabled");
				 $("#isPermuted",container).val("");
				 $("#oldCarPurchase",container).val("");
			 }
		});
		//控制保存与审核按钮
		$("#vehiclePrice",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#presentSum",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#permutedVin",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#oldCarPurchase",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#firstPermentRatio",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#installmentAmount",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#firstPermentRangeS",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#firstPermentRangeE",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#loanRate",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#installmentNumber",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#loanOrg",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#vehiclePurpose",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#productCode",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#vin",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#invoiceMode",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#payMode",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#deliveryMode",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#deliveryModeElec",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#deliveringDate",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#soldBy",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		$("#sheetCreateDate",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
		});
		
		$("#customerNo",container).bindChange(function(obj){
			var customerNo=$("#customerNo",container).val();
			if(customerNo!=null&&customerNo!=undefined){
				  $("#customerInfo",container).removeAttr("disabled");

			 }else{
				 $("#customerInfo",container).attr("disabled","disabled"); 
			 }
		});
		
		$("#payMode",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
			var payMode=$("#payMode",container).val();
			if(payMode=="10251003"){
				  $("#allLoanRate",container).removeAttr("disabled");
				  $("#loanOrg",container).removeAttr("disabled");
				  $("#firstPermentRangeS",container).removeAttr("disabled");
				  $("#firstPermentRangeE",container).removeAttr("disabled");
				  $("#loanRate",container).removeAttr("disabled");
				  $("#firstPermentRatio",container).removeAttr("disabled");
				  $("#installmentAmount",container).removeAttr("disabled");
				  $("#installmentNumber",container).removeAttr("disabled");
			 }else{
				 $("#allLoanRate",container).attr("disabled","disabled"); 
				 $("#loanOrg",container).attr("disabled","disabled"); 
				 $("#loanOrg",container).val("");
				 $("#firstPermentRangeS",container).attr("disabled","disabled"); 
				 $("#firstPermentRangeS",container).val("");
				 $("#firstPermentRangeE",container).attr("disabled","disabled"); 
				 $("#firstPermentRangeE",container).val("");
				 $("#loanRate",container).attr("disabled","disabled"); 
				 $("#loanRate",container).val("");
				 $("#firstPermentRatio",container).attr("disabled","disabled"); 
				 $("#firstPermentRatio",container).val("");
				 $("#installmentAmount",container).attr("disabled","disabled"); 
				 $("#installmentAmount",container).val("");
				 $("#installmentNumber",container).attr("disabled","disabled"); 
				 $("#installmentNumber",container).val("");
			 }
		});
		$("#soNo",container).bindChange(function(obj){
			var soNo=$("#soNo",container).val();
			if(soNo!=null){
				 $("#auditBtn",container).removeAttr("disabled");
			 }
		});
		$("#isPermuted",container).bindChange(function(obj){
			$("#saveBtn",container).removeAttr("disabled");
			$("#auditBtn",container).attr("disabled","disabled");
			var isPermuted=$("#isPermuted",container).val();
			if(isPermuted=="12781001"){
				  $("#permutedVin",container).removeAttr("disabled");
				  $("#permutedVin",container).addClass("required");
				  $("#oldCarPurchase",container).removeAttr("disabled");
				  $("#oldCarPurchase",container).addClass("required");
				  $("#permutedDesc",container).removeAttr("disabled");
			 }else{
				 $("#oldCarPurchase",container).attr("disabled","disabled");
				 $("#oldCarPurchase",container).removeClass("required");
				 $("#permutedVin",container).attr("disabled","disabled");
				 $("#permutedVin",container).removeClass("required");
				 $("#permutedDesc",container).attr("disabled","disabled");
				 $("#oldCarPurchase",container).val("");
			 }
		});
		$("a[data-onclickEvent1='true']",container).on("dms.click",function(event){
			
			CheckTmPoTentialCustomer($("#customerNo",container).val());
			var deliveryModeElec=$("#deliveryModeElec",container).val(); 
			if(deliveryModeElec==16001001||deliveryModeElec==16001002){
				CheckSaveEcOrder($("#customerNo",container).val()+","+$("#brand",container).val()+","+$("#series",container).val());
			}
		});
		$("a[data-beforeRequest='true']",container).on('beforeRequest.dms',function(event,returnResult){
			
			   var falg=0;
			   if(event.target.id=='auditBtn'){
				   
				   var para1 = dmsCommon.getSystemParamInfo("8001","8001");
				   
				   var para2 = dmsCommon.getSystemParamInfo("8032","8032");
				   
				   if(para1=="12781001"&&para2=="12781001"){
					   
					  /*  $("auditBtn1",container).click(); */
					   $("a[data-onclickEvent='true']", container).click();
					   returnResult.status = false;
					   return ;
				   }
			    }
				if(event.target.id=='saveBtn'){
					var deliveringDate=$("#deliveringDate",container).val();
					var vin=$("#vin",container).val();
					var isPermuted=$("#isPermuted",container).val();
					var permutedVin=$("#permutedVin",container).val();
					var oldCarPurchase=$("#oldCarPurchase",container).val();
					var vehiclePrice=$("#vehiclePrice",container).val();
					var deliveryModeElec=$("#deliveryModeElec",container).val(); 
					debugger
					if(deliveringDate==null||deliveringDate==undefined||deliveringDate==""){
						dmsCommon.tip({status:"warning",msg:"交车日期不能为空!"});
						returnResult.status = false;
						return ;
					}
					if(new Date()<new Date(deliveringDate)){
						dmsCommon.tip({status:"warning",msg:"交车日期不能大于当前日期!"});
						returnResult.status = false;
						return ;
					}
					if(isPermuted=="12781001"){
						if(permutedVin==null||permutedVin==undefined){
							dmsCommon.tip({status:"warning",msg:"置换车VIN不能为空!"});
							returnResult.status = false;
							return ;
						}
						if(oldCarPurchase==null||permutedVin==undefined||oldCarPurchase==0||oldCarPurchase==""){
							dmsCommon.tip({status:"warning",msg:"必须填写收购金额!"});
							returnResult.status = false;
							return ;
						}
					}
					if(vehiclePrice==null||vehiclePrice==undefined||vehiclePrice==""||vehiclePrice==0){
						dmsCommon.tip({status:"warning",msg:"必须填写车辆价格!"});
						returnResult.status = false;
						return ;
					}
					if(vin==null||vin==undefined||vin==""){
						if(deliveryModeElec==16001001){
							dmsCommon.tip({status:"warning",msg:"现车资源VIN不能为空!"});
							returnResult.status = false;
							return ;
						}
					}else{
						if(deliveryModeElec==16001002){
							dmsCommon.tip({status:"warning",msg:"CALL车不能选择VIN码!"});
							returnResult.status = false;
							return ;
						}
					}
					
					if(checkPotentCustomer){
						dmsCommon.tip({status:"warning",msg:"潜在客户的购车因素必须填写!"});
						returnResult.status = false;
						return ;
					}
					
					if(deliveryModeElec==16001001||deliveryModeElec==16001002){	
						if(checkSaveEcOrder==1){
							dmsCommon.tip({status:"warning",msg:"不是官网用户不能做官网订单，请重新选择客户！"});
							returnResult.status = false;
							return ;
						}
						if(checkSaveEcOrder==2){
							dmsCommon.tip({status:"warning",msg:"不是现货不能做官网订单，请重新选择客户！"});
							returnResult.status = false;
							return ;
						}
						if(checkSaveEcOrder==3){
							dmsCommon.tip({status:"warning",msg:"无效状态不能做官网订单，请重新选择客户！"});
							returnResult.status = false;
							return ;
						}
						if(checkSaveEcOrder==4){
							dmsCommon.tip({status:"warning",msg:"无效状态不能做官网订单，请重新选择客户！"});
							returnResult.status = false;
							return ;
						}
						if(checkSaveEcOrder==5){
							
							dmsCommon.tip({status:"warning",msg:"订单车系与官网订单意向车系不匹配，请重新选择订单车系！"});
							returnResult.status = false;
							return ;
						}
					}
				}
			if(falg==1){
				returnResult.status = true;		
			}
			if(falg==2){
				returnResult.status = false;
				return ;
			}
			returnResult.status = true;
	    });

			//弹出页面打开前执行函数
		$("a[data-beforeShowEvent='true']",container).on("beforeShow.dms",function(event,returnResult){
		debugger;
			    var config=$("#config",container).val();
			    var customerNo=$("#customerNo",container).val();
			    if(event.target.id=='allLoanRate'){
			    	if(config==null||config==undefined){
						dmsCommon.tip({status:"warning",msg:"请单择配置！"});
						returnResult.status = false;
						return ;
					}
			    }
			    if(event.target.id=='customerInfo'){
			    	if(customerNo!=null){
						$(this).data("pageData",{CUSTOMER_NO:customerNo});
					}
			    }
				returnResult.status = true;
				/* $(container).data("pageData",{CUSTOMER_NO:customerNo}); */
		          /* dmsCommon.refreshPageByUrl("customer/potentialcus/customerInfo/editCusInfo.html",container); */
				returnResult.status = true;
			});
		 
		//绑定事件
	 	$("a[data-callBack='true']", container).on( "callBack.dms", function(event, response) {
	 		if(event.target.id=='saveBtn'){
	 			$("#soNo",container).setDmsValue(response.SO_NO);
	 			$("#soStatus",container).setDmsValue(response.SO_STATUS);
	 			 $("#saveBtn",container).attr("disabled","disabled"); 
	 		}
	 		        
					/* $("a[data-onclickEvent='true']", container).data("pageData", response);
					$("a[data-onclickEvent='true']", container).click(); */
				}); 
		//绑定onchange 事件
		$("a[data-onclickEvent='true']",container).on("dms.click",function(obj){
			
	
	       /*  dmsCommon.refreshPageByUrl("customer/potentialcus/customerInfo/editCusInfo.html",container);  */
				 changeFormal(obj); 
			});
		
		 var CheckTmPoTentialCustomer=function(str){
				dmsCommon.ajaxRestRequest({
					url : dmsCommon.getDmsPath()["retail"] + "/ordermanage/salesOrders/check/tmPoTentialCustomer/"+str,
					type : 'GET',
					sucessCallBack : function(data) {
						if(data.length>0){
							checkPotentCustomer = true;//总共的状态类型：info、success、error、warning
						}
					}
				});
				
		 }
		 var CheckSaveEcOrder=function(str){
				dmsCommon.ajaxRestRequest({
					url : dmsCommon.getDmsPath()["retail"] + "/ordermanage/salesOrders/check/saveEcOrder/"+str,
					type : 'GET',
					sucessCallBack : function(data) {
						checkSaveEcOrder=data;

					}
					})
					};

		 
		});	
</script>