<div class="dms-search">
	<form class="form-horizontal">
		<div class="panel panel-default">
			<div class="panel-body">
				<div class="row ">
				<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">业务类型</label>
							<div class="col-xs-8">
								<select id="businessType" name="businessType" class="form-control"
									data-dictCode="1300" data-value="13181001">
								</select>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group" data-tableSelect="true">
							<label class="control-label col-xs-4">订单编号</label>
							<div class="col-xs-8 ">
								<input type="text" class="form-control" id="soNo" name="soNo">
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group form-group-xs m-b-xs">
							<label class="control-label col-xs-4">开票客户</label>
							<div class="col-xs-8 ">
								<input type="text" class="form-control" id="invoiceCustomer" name="invoiceCustomer">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-8 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4 col-sm-2">VIN号</label>
							<div class="col-xs-8 col-sm-10">
								<input type="text" class="form-control" id="vin" name="vin">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">发票编号</label>
							<div class="col-xs-8 ">
								<input class="form-control" id="invoiceNo" name="invoiceNo" type="text">
							</div>
						</div>
					</div>
						
				
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">证件号</label>
							<div class="col-xs-8 ">
								<input class="form-control" id="certificateNo" name="certificateNo" type="text">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4">车牌号</label>
							<div class="col-xs-8 ">
								<input class="form-control" id="license" name="license" type="text">
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-12 col-md-8 col-lg-3">
						<div class="form-group">
							<label class="control-label col-xs-4 col-sm-2">开票日</label>
							<div class="col-xs-8 col-sm-10">
							<div class="input-group input-daterange" data-defaultDays="1">
			         				<input type="text" class="form-control" readonly  name="invoiceBeginDate">
			         				<span class="input-group-addon">至</span>
			         				<input type="text" class="form-control" readonly  name="invoiceEndDate"> 
			         				<span class="input-group-btn">
	                                      <!--    <button class="btn default input-clear" type="button">
	                                            <i class="fa fa-close"></i>
	                                        </button> -->
	                                 </span>
			    	 			</div>
			    	 		</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
						<div class="form-group">
							<label class="control-label col-xs-4">单据状态</label>
							<div class="col-xs-8">
								<select id="soStatus" name="soStatus" class="form-control"
									data-dictCode="1301" >
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="row ">
					<div class="col-xs-12 ">
						<div class="query-btn">
							<a href="javascript:;" class="btn blue"> <i
								class="fa fa-search"></i> 查询
							</a> <a href="javascript:;" class="btn blue"><i
								class="fa fa-undo"></i> 重置</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	<div class="panel panel-default table-panel">
		<div class="panel-heading">
			<div class="pannel-name">开票信息</div>
			<div class="pannel-button">
				<div class="btn-group btn-group-sm">
					<a class="btn btn-outline"
						data-url="retail/ordermanage/invoiceregister/addInvoiceRegister.html"
						data-toggle="modal" data-width="modal-md" data-validateUrl="retail/ordermanage/invoiceregister/addInvoiceRegister.html" data-validateModel="retail"  data-validateMethod=""><i class="fa fa-plus-square"></i>新增</a>
					<a class="btn btn-outline"
						data-url="retail/ordermanage/invoiceregister/addRetailChange.html"
						data-toggle="modal" data-width="modal-lg"><i class="fa fa-plus-square"></i>零售变更上报</a>
				 <a data-url="/ordermanage/invoiceregisters/export/excel" data-model="retail" data-method="downLoad" data-toggle="confirmation" 
							class="btn btn-outline"
							><i class="fa fa-download" ></i>Excel导出 </a> 
				<!-- 	<a href="javascript:;"  data-model="vehicle" data-method="downLoad" data-toggle="confirmation"
								class="btn btn-outline " ><i class="fa fa-upload"></i>发票补扫</a> -->
				</div>
			</div>
		</div>
		<div class="panel-body">
			<table
				class="table table-striped table-bordered table-hover table-responsive"
				id="dms_table"></table>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).one("onload.dms",function(event,container){
		new Datatable().initPagination({
			container:container,
			src : "dms_table",
			url : dmsCommon.getDmsPath()["retail"] + "/ordermanage/invoiceregisters",
			rowID : "SO_NO",
			sortName : "SO_NO",
			sortOrder : "asc",
			autoHeight:false,
			undefinedText : "",
			columns : [ 
				{field : "ITEM_ID",title : "操作",operateFormat : [
                       {type:"edit",url:"retail/ordermanage/invoiceregister/editInvoiceRegister.html",openWidth:"modal-md",attr:'data-validateUrl="retail/ordermanage/invoiceregister/editInvoiceRegister.html" data-validateModel="retail"  data-validateMethod=""',isShow:function(value, row, index){
						   if(row.INVOICE_CHARGE_TYPE=="13181001"){
							   return false;
                    	   }else{
                    		   return true;
                    	   }      
					   }},
                       {type:"edit",url:"retail/ordermanage/invoiceregister/ReInvoiceRegister.html",openWidth:"modal-md",operateIcon:'<i class="fa fa-lg fa-check-square-o"></i>',title:"发票补扫",isShow:function(value, row, index){
						   if(row.INVOICE_CHARGE_TYPE=="13181001"&&row.FEE_VEHICLE_RESCAN_REMAINING>0){
									   return true;
		                    	   }else{
		                    		   return false;
		                    	   }      
							   }},
                      
                        ]
                },  
			    {field : "SO_NO",title : "订单编号"},		  
			    {field : "SO_STATUS",title : "单据状态", codeFormat : {type:"dict",codeType:"1301"}},
				{field : "VIN",title : "VIN"},
				{field : "INVOICE_CUSTOMER",title : "开票客户"},
				{field : "NAME1",title : "开票人员"},
				{field : "INVOICE_WRITER",title : "开票人员",visible:false},
				{field : "INVOICE_NO",title : "发票编号"},
				{field : "FEE_VEHICLE_RESCAN_REMAINING",title : "发票补扫剩余次数"},
				{field : "IDENTIFY_STATUS",title : "扫描识别状态", codeFormat : {type:"dict",codeType:"1718"}},
				{field : "RETIAL_CHANGE_TIMES",title : "零售变更次数"},
				{field : "RETIAL_DATE",title : "零售变更时间",dateFormat : {format:"YYYY-MM-DD HH:mm:ss"}},
				{field : "INVOICE_TYPE_CODE",title : "发票类型",visible:false},
				{field : "INVOICE_TYPE_NAME",title : "发票类型"},
				{field : "INVOICE_CHARGE_TYPE",title : "费用类型",codeFormat : {type:"dict",codeType:"1318"}},
				{field : "INVOICE_AMOUNT",title : "发票金额",numberFormat : {decimal:2}},
				{field : "TRANSACTOR",title : "经办人",visible:false},
				{field : "NAME2",title : "经办人"},
				{field : "REMARK",title : "备注"},
				{field : "CT_CODE",title : "证件类型", codeFormat : {type:"dict",codeType:"1239"}},
				{field : "CERTIFICATE_NO",title : "证件号码"},
				{field : "RECORDER",title : "登记人",visible:false},
				{field : "NAME3",title : "登记人"},
				{field : "INVOICE_DATE",title : "开票日期",dateFormat : {format:"YYYY-MM-DD"}},
				{field : "RECORD_DATE",title : "登记日期",dateFormat : {format:"YYYY-MM-DD"}},
				{field : "FILE_URL",title : "发票URL"},
				{field : "EC_ORDER_NO",title : "官网订单号"},
				]
		});
    });
</script>
