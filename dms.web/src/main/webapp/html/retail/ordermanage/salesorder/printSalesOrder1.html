<link rel="stylesheet" type="text/css" 
	href="../assets/layouts/layout/css/PrintArea.css">
<div class="dms-edit PrintArea ajaxrest" data-url="/ordermanage/salesOrders/{[SO_NO]}" data-model="retail" data-pageInitCallBack="true">
	<div class="panel panel-default panel-print">
		<div class="panel-body">
			<div class="print-title">
				<div class="row h1Title">
					<div class="col-xs-12">
						<label>开票通知单</label>
					</div>
				</div>
				
  <p>财务部：
  </p>
  	<div class="row">
				
					<div class="col-xs-6" >
						<div class="form-group">
							<label class="control-label col-xs-3" > &nbsp;&nbsp;&nbsp;&nbsp;现有客户:</label>
							<div class="col-xs-9" >
								<span class="form-show print-groove" data-fieldName="CUSTOMER_NAME"></span>
							</div>
						</div>
					</div>
					<!--/span-->
			
					<div class="col-xs-3" >
						<div class="form-group">
							<label class="control-label col-xs-6">购买汽车:</label>
							<div class="col-xs-6">
								<span class="form-show print-groove">1</span>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-3" >
						<div class="form-group">
							<label class="control-label col-xs-12" >辆，客户身份证号码</label>
						
						</div>
					</div>
					<!--/span-->
			<!-- 		<div class="col-xs-3" >
						<div class="form-group">
							<label class="control-label col-xs-6">销售顾问:</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove"></span>
							</div>
						</div>
					</div> -->
					<!--/span-->
				
				</div>
				<div class="row">
				
					<div class="col-xs-6" >
						<div class="form-group">
							<label class="control-label col-xs-6" >（组织机构代码）为:</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove" data-fieldName="CERTIFICATE_NO"></span>
							</div>
						</div>
					</div>
					<!--/span-->
			
					<div class="col-xs-6" >
						<div class="form-group">
							<label class="control-label col-xs-6">；购买车辆类型:</label>
							<div class="col-xs-6">
								<span class="form-show print-groove" data-fieldName="MODEL_NAME"></span>
							</div>
						</div>
					</div>
					<!--/span-->
				
				
				</div>
				<div class="row">
				
					<div class="col-xs-3" >
						<div class="form-group">
							<label class="control-label col-xs-6" >、产地：</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove" data-fieldName="PRODUCTING_AREA"></span>
							</div>
						</div>
					</div>
					<!--/span-->
			
					<div class="col-xs-5" >
						<div class="form-group">
							<label class="control-label col-xs-5">、合格证号码:</label>
							<div class="col-xs-7">
								<span class="form-show print-groove" data-fieldName="CERTIFICATE_NUMBER"></span>
							</div>
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-4" >
						<div class="form-group">
							<label class="control-label col-xs-5">、发动机号码:</label>
							<div class="col-xs-7">
								<span class="form-show print-groove" data-fieldName="ENGINE_NO"></span>
							</div>
						</div>
					</div>
					<!--/span-->
				
				
				</div>
					<div class="row">
				
					<div class="col-xs-5" >
						<div class="form-group">
							<label class="control-label col-xs-4" >、车架号码：</label>
							<div class="col-xs-8" >
								<span class="form-show print-groove" data-fieldName="VIN"></span>
							</div>
						</div>
					</div>
					；
					<!--/span-->
				</div>
					<div class="row">
				
					<div class="col-xs-4" >
						<div class="form-group">
							<label class="control-label col-xs-6" >销售款共计：</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove" data-fieldName="VEHICLE_PRICE"></span>
							</div>
						</div>
					</div>
					<!--/span-->
			
					<div class="col-xs-3" >
						<div class="form-group">
							<label class="control-label col-xs-4">元；</label>
							<div class="col-xs-8">
								<input type="checkbox" name="isPersonDriveCar"
													id="isPersonDriveCar" data-dictCode="1057"
													data-dictLabel="银行转账/" />
							</div>
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-5" >
						<div class="form-group">
							<div class="col-xs-4">
								<input type="checkbox" name="isPersonDriveCar"
													id="isPersonDriveCar" data-dictCode="1057"
													data-dictLabel="现金" />
							</div>
							<label class="control-label col-xs-8">形式交讫,请据此开具发票。</label>
						</div>
					</div>
					<!--/span-->
				
				
				</div>
         <div class="col-xs-6" >
								<span class="form-show print-groove"></span>
		 </div>
			</div>
				<div class="print-foot">
			
				<div class="row">
				
					<div class="col-xs-4" >
						<div class="form-group">
							<label class="control-label col-xs-6" >销售经理:</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove"></span>
							</div>
						</div>
					</div>
					<!--/span-->
						<div class="col-xs-4" >
						<div class="form-group">
							<label class="control-label col-xs-6">销售顾问:</label>
							<div class="col-xs-6" >
								<span class="form-show print-groove">{[USER_NAME]}</span>
							</div>
						</div>
					</div>
					<!--/span-->
					<div class="col-xs-4" >
						<div class="form-group">
							<label class="control-label col-xs-6" >开票员:</label>
							<div class="col-xs-6">
								<span class="form-show print-groove"></span>
							</div>
						</div>
					</div>
					<!--/span-->
				
				
				</div>
			
				
			</div>
		</div>
	</div>
</div>
<div class="print-without">
	<a id="print" class="btn blue printfy"><i class="fa fa-print"></i>打印</a>
	<a data-info="editOrder"
		href="retail/ordermanage/salesorder/searchSalesOrder.html"
		class="btn blue ajaxify" data-beforeShowEvent="true"><i
		class="fa fa-reply"></i>返回</a>
</div>
<script type="text/javascript">
	$(document).one("onload.dms", function(event, container) {
		 $("div[data-pageInitCallBack='true']",container).on("callBack.dms",function(event,response){
			 $("#gender",container).setDmsValue($('option:selected',$("#selectGender",container)).text());
			 $("#businessType",container).setDmsValue($('option:selected',$("#selectBusinessType",container)).text());
			 debugger;
			 console.log("---------------"+$('option:selected',$("#selectGender",container)));
		 });
		//装潢项目明细
		new Datatable().initLocale({
			src : "soDecrodateList",
			container:container,
			rowID : "SO_DECRODATE_ID",
			url : dmsCommon.getDmsPath()["retail"]+ "/ordermanage/salesOrders/{[SO_NO_ID]}/decorationproject",
			mergeTotal:{
				megerCellNumber:4,
				megerCellName:"合计"
			},
			columns : [
	                   {field : "LABOUR_CODE",title : "装潢项目代码"}, 
			           {field : "LABOUR_NAME",title : "装潢项目名称"},
			           {field : "LABOUR_PRICE",title : "工时单价"}, 
			           {field : "DISCOUNT",title : "折扣率"}, 
			           {field : "STD_LABOUR_HOUR",title : "标准工时"}, 
			           {field : "AFTER_DISCOUNT_AMOUNT",title : "应收金额"}
	                  ],onLoadSuccess : function() {
	                	  var rownu = $("#soDecrodateList",container).dmsTable().getTableRows();
	      				  if(rownu<=0){
	      					$("#panelSoDecrodateList",container).addClass("hidden");
	      				  }else{
	      					$("#panelSoDecrodateList",container).removeClass("hidden");
	      					}
						}
		});
		//装潢材料明细
		new Datatable().initLocale({
			src : "soDecrodatePartList",
			container:container,
			rowID : "DECRODATE_PART_ID",
			url : dmsCommon.getDmsPath()["retail"]+ "/ordermanage/salesOrders/{[SO_NO_ID]}/deracotionmaterial",
			mergeTotal:{
				megerCellNumber:4,
				megerCellName:"合计"
			},
			columns : [
	                   {field : "PART_NAME",title : "材料名称"}, 
			           {field : "ACCOUNT_MODE",title : "结算方式",codeFormat : {type:"dict",codeType:"1406"}},
			           {field : "SALES_PRICE",title : "销售价"}, 
			           {field : "DISCOUNT",title : "折扣率"},  
			           {field : "PART_QUANTITY",title : "数量"},  
			           {field : "AFTER_DISCOUNT_AMOUNT",title : "应收金额"}
	                  ],onLoadSuccess : function() {
	                	  var rownu = $("#soDecrodatePartList",container).dmsTable().getTableRows();
	      				  if(rownu<=0){
	      					$("#panelSoDecrodatePartList",container).addClass("hidden");
	      				  }else{
	      					$("#panelSoDecrodatePartList",container).removeClass("hidden");
	      					}
						}
		});
		//服务项目明细
		new Datatable().initLocale({
			src : "soServicesList",
			container:container,
			rowID : "SO_SERVICES_ID",
			url : dmsCommon.getDmsPath()["retail"]+ "/ordermanage/salesOrders/{[SO_NO_ID]}/serviceproject",
			mergeTotal:{
				megerCellNumber:4,
				megerCellName:"合计"
			},
			columns : [
	                   {field : "SERVICE_NAME",title : "服务项目名名称"}, 
			           {field : "SERVICE_TYPE",title : "服务类别",codeFormat : {type:"dict",codeType:"1402"}},
			           {field : "ACCOUNT_MODE",title : "结算方式",codeFormat : {type:"dict",codeType:"1406"}},
			           {field : "DIRECTIVE_PRICE",title : "销售指导价"}, 
			           {field : "DIRECTIVE_PRICE",title : "应收金额"}
	                  ],onLoadSuccess : function() {
	                	  var rownu = $("#soServicesList",container).dmsTable().getTableRows();
	      				  if(rownu<=0){
	      					$("#panelSoServicesList",container).addClass("hidden");
	      				  }else{
	      					$("#panelSoServicesList",container).removeClass("hidden");
	      					}
						}
		});

	});
</script>