<div class="dms-edit ajaxrest" 
	data-model="manage">
	<!-- BEGIN FORM-->
	<form class="form-horizontal">
	   
		<div class="panel-body">
			<div class="panel panel-default table-panel">
			    <div class="panel-heading">
					<div class="pannel-name"></div>
				    <div class="btn-group btn-group-sm">
						<a class="btn btn-outline" data-url="repair/activity/selectSubjoin.html"
							data-toggle="modal"  data-width="modal-sm"> <i class="fa fa-plus-square"></i> 新增
						</a> 
					</div>

				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="subjoinList">
					</table>
					<input type="hidden" id="afterDiscountAmountLabour" name="afterDiscountAmountLabour" value="0">
					<input type="hidden" id="zkAmountLabour" name="zkAmountLabour" value="0">
				</div>
			</div>
		</div>
	</form>
</div>

<script type="text/javascript">
	$(document).one("onload.dms",function(event,container){
		var calcAddItemAmount=function(event,container){
			gfkRepair.calcAddItemAmount();
		};
		new Datatable().initLocale({
			src : "subjoinList",
			container:container,
			columns : [	{field : "",title : "操作",operateFormat : [ {type : "localDel",onAfterEvent:function(value,row,index){
				                  calcAddItemAmount();}}]},
			            {field : "ADD_ITEM_CODE",title : "附加项目代码"}, 
			            {field : "ADD_ITEM_NAME",title : "附加项目名称"},
			            {field : "CHARGE_PARTITION_NAME",title : "<span style='color: blue;'>收费区分</span>",inputSelectFormat : {
											url : "/accessoryItem/AccessoryItem/cplist",
											model : "repair",
											labelValue : "CHARGE_PARTITION_CODE",
											lableDesc : "CHARGE_PARTITION_CODE",
											attr : "data-existsdefault='false'"
						}},
			            {field : "ADD_ITEM_AMOUNT",title : "附加项目费"},
			            {field : "DISCOUNT",title : "<span style='color: blue;'>折扣率</span>",inputTextFormat:{}}, 
			            {field : "RECEIVE_AMOUNT",title : "折扣后附加项目费",autoValueFormat:{autoValue:"#discount*#addItemAmount",afterEvent:calcAddItemAmount}}
			         ]
		});
	});

</script>
