<div class="dms-detail"  data-model="manage" data-pageInitCallBack="true">
	<form class="form-horizontal">
		<div class="modal-header">
			<div class="modal-title">通告内容</div>
			<div class="modal-close">
				<a data-dismiss="modal" class="btn btn-lg">
				<i class="fa fa-remove"></i></a>
			</div>
		</div>
		<div class="modal-body">
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="pannel-name">通告主要信息</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<input type="hidden" name="typeId" data-fieldName=TYPE_ID >
					<input type="hidden" name="bulletinId" data-fieldName=BULLETIN_ID >
					<div class="row">
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">通告主题</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="topic" name="topic" data-fieldName="TOPIC"/>
								</div>
							</div>
						</div>	
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">通告类别</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="typename" name="typename" data-fieldName="TYPENAME"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">开始时间</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="beginDate" name="beginDate" data-fieldName="START_TIME_DATE"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">结束时间</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="endDate" name="endDate" data-fieldName="END_TIME_DATE"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">逾期继续显示</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="isShow" name="isShow" data-fieldName="isShow"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">是否需要经销商签收</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="isCheck" name="isCheck" data-fieldName="sign"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">通告紧急程度</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="level" name="level" data-fieldName="level"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">接受职位</label>
								<div class="col-xs-8" >
									  <input class="form-control dmsDisabled" type="text" id="poseName" name="poseName" data-fieldName="poseName"/>
								</div>
							</div>
						</div>
						
						<div class="col-xs-12">
							<div class="form-group">
								<label class="control-label col-xs-3">主要内容</label>
								<div class="col-xs-8" >
									<textarea id="content" name="content" class="col-xs-12 dmsDisabled" data-fieldName="CONTENT"></textarea>
								</div>
							</div>
						</div>					
										
					</div>					
				</div>
			</div>
			
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="pannel-name">通告附件</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="fileList">
					</table>
				</div>			
			</div>
									
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="pannel-name">已读人员</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="readList">
					</table>
				</div>			
			</div>
			
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="pannel-name">未读人员</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="notReadList">
					</table>
				</div>			
			</div>
			
			<div class="panel panel-default sign">
				<div class="panel-heading">
					<div class="pannel-name">已签收人员</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="signList">
					</table>
				</div>			
			</div>
			
			<div class="panel panel-default sign">
				<div class="panel-heading">
					<div class="pannel-name">未签收人员</div>
					<div class="pannel-tools">
						<a href="javascript:;" class="expand"> <i class="fa fa-chevron-down"></i></a>
					</div>
				</div>
				<div class="panel-body">
					<table
						class="table table-striped table-bordered table-hover table-responsive"
						id="notSignList">
					</table>
				</div>			
			</div>
			
		</div>
		
		<div class="modal-footer">
			<div class="modal-footer center-block">
				<a data-dismiss="modal" class="btn blue"><i class="fa fa-undo"></i>返回</a>
			</div>
		</div>
		
	</form>
</div>

<script type="text/javascript">
$(document).one("onload.dms",function(event,container){	
	
	dmsCommon.ajaxRestRequest({
		url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinQuery/viewBulletin/"+{[BULLETIN_ID]},
		type : 'GET',
		dataType:'json',
		async: false,
		sucessCallBack : function(data) {						
			$("#topic",container).val(data.TOPIC);
			$("#typename",container).val(data.TYPENAME);
			$("#beginDate",container).val(data.START_TIME_DATE);
			$("#endDate",container).val(data.END_TIME_DATE);
			$("#isShow",container).val(data.ISSHOW);
			$("#isCheck",container).val(data.SIGN);
			$("#level",container).val(data.LEVEL);
			$("#poseName",container).val(data.POSE_NAME);
			$("#content",container).val(data.CONTENT);
			
			if(data.SIGN == "是" ){
				$("div.sign").css("display","block");
			}
			if(data.SIGN == "否" ){
				$("div.sign").css("display","none");
			}
		}
	});
	
	//文件列表
	new Datatable().initPagination({
		src : "fileList",
		container:container,
	    url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinMaintain/getFiles/"+{[BULLETIN_ID]},
		autoHeight:false,
		columns : [
		            //{field : "ATTACHMENT_ID",title : "ID"},
		            {field : "FILENAME",title : "文件名"}
		          ]
	}); 
	
	//未读人员列表
	new Datatable().initPagination({
		src : "notReadList",
		container:container,
	    url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinQuery/getNotReadList/"+{[BULLETIN_ID]},
	    rowID:"DEALER_ID",
	    sortName:"DEALER_CODE",
	    sortOrder:"ASC",
		autoHeight:false,
		columns : [ 
		            {field : "DEALER_CODE",title : "经销商代码"},
   		            {field : "DEALER_NAME",title : "经销商"}
		          ]
	}); 
	
	//已读人员列表
	new Datatable().initPagination({
		src : "readList",
		container:container,
	    url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinQuery/getReadList/"+{[BULLETIN_ID]},
	    rowID:"DEALER_ID",
	    sortName:"DEALER_CODE",
	    sortOrder:"ASC",
		autoHeight:false,
		columns : [ 
		            {field : "DEALER_CODE",title : "经销商代码"},
   		            {field : "DEALER_NAME",title : "经销商"},
   		            {field : "READ_DATE",title : "查看时间"},
   		            {field : "R_CONTENT",title : "回复内容"},
   		            {field : "FILENAME",title : "回复附件"},
   		            {field : "CREATE_DATE",title : "回复日期"}
		          ]
	}); 
	
	//已签收人员列表
	new Datatable().initPagination({
		src : "signList",
		container:container,
	    url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinQuery/getSignList/"+{[BULLETIN_ID]},
	    rowID:"DEALER_ID",
	    sortName:"DEALER_CODE",
	    sortOrder:"ASC",
		autoHeight:false,
		columns : [ 
		            {field : "DEALER_CODE",title : "经销商代码"},
   		            {field : "DEALER_NAME",title : "经销商"},
		            {field : "SIGN_CREATE",title : "签收日期"}
		          ]
	}); 
	
	//已签收人员列表
	new Datatable().initPagination({
		src : "notSignList",
		container:container,
	    url : dmsCommon.getDmsPath()["manage"] + "/bulletin/bulletinQuery/getNotSignList/"+{[BULLETIN_ID]},
	    rowID:"DEALER_ID",
	    sortName:"DEALER_CODE",
	    sortOrder:"ASC",
		autoHeight:false,
		columns : [ 
		            {field : "DEALER_CODE",title : "经销商代码"},
   		            {field : "DEALER_NAME",title : "经销商"},
		          ]
	}); 
	
});

</script>
